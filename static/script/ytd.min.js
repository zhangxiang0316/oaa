PJF.apply=function(b,c){if(b&&c&&"object"==typeof c)for(var d in c)b[d]=c[d];return b};PJF.override=function(b,c){if(c){var d=b.prototype;PJF.apply(d,c);d.toString=c.toString}};
PJF.extend=function(){var b=function(b){for(var c in b)this[c]=b[c]},c=Object.prototype.constructor;return function(d,e,f){"object"==typeof e&&(f=e,e=d,d=f.constructor!=c?f.constructor:function(){e.apply(this,arguments)});var g=function(){},h=e.prototype;g.prototype=h;g=d.prototype=new g;g.constructor=d;d.superclass=h;h.constructor==c&&(h.constructor=e);d.override=function(b){PJF.override(d,b)};g.superclass=g.supr=function(){return h};g.override=b;PJF.override(d,f);d.extend=function(b){return PJF.extend(d,
b)};return d}}();PJF.namespace=function(){for(var b=arguments.length,c=0,d,e,f,g;c<b;++c){d=arguments[c].split(".");g=window[d[0]];void 0===g&&(g=window[d[0]]={});f=d.slice(1);d=f.length;for(e=0;e<d;++e)g=g[f[e]]=g[f[e]]||{}}return g};PJF.namespace("PJF.util");
PJF.util={extend:jQuery.extend,json2str:function(b,c){var d=!1;c&&(d=c);if(!b)return"";var e=[],f=function(b,c){return"object"==typeof b&&null!=b?PJF.util.json2str(b,c):/^(string|number)$/.test(typeof b)?"'"+b+"'":b};if(b.constructor===Array){for(var g in b)!d&&"string"==typeof b[g]&&(b[g]=b[g].replace(RegExp("\\\\","gm"),"\\\\"),b[g]=b[g].replace(RegExp("'","gm"),"\\'"),b[g]=b[g].replace(RegExp('"',"gm"),'\\"'),b[g]=b[g].replace(RegExp("\n","gm"),"\\n"),b[g]=b[g].replace(RegExp("\r","gm"),"\\r")),
e.push(f(b[g],d));return"["+e.join(",")+"]"}for(g in b)!d&&"string"==typeof b[g]&&(b[g]=b[g].replace(RegExp("\\\\","gm"),"\\\\"),b[g]=b[g].replace(RegExp("'","gm"),"\\'"),b[g]=b[g].replace(RegExp('"',"gm"),'\\"'),b[g]=b[g].replace(RegExp("\n","gm"),"\\n"),b[g]=b[g].replace(RegExp("\r","gm"),"\\r")),e.push("'"+g+"':"+f(b[g],d));return"{"+e.join(",")+"}"},getType:function(b){var c;return("object"==(c=typeof b)?null==b&&"null"||Object.prototype.toString.call(b).slice(8,-1):c).toLowerCase()},trim:function(b){return $.trim(b)},
apply:function(b,c){return PJF.apply(b,c)},convertCounty:function(b){function c(){new PJF.ui.messageBox({style:"alert",title:resource.convertCounty_messageBox_title,content:resource.convertCounty_messageBox_content})}if($.isArray(b)){for(var d=[],e=b.length,f=0;f<e;f++){var g=b[f]+"";if(6>g.length){c();return}"0000"==g.substring(2,6)?d.push({province:g.substring(0,2)+"0000",city:"",county:""}):"00"==g.substring(4,6)?d.push({province:g.substring(0,2)+"0000",city:g.substring(0,4)+"00",county:""}):d.push({province:g.substring(0,
2)+"0000",city:g.substring(0,4)+"00",county:g})}return d}g=b+"";if(6>g.length)c();else return"0000"==g.substring(2,6)?{province:g.substring(0,2)+"0000",city:"",county:""}:"00"==g.substring(4,6)?{province:g.substring(0,2)+"0000",city:g.substring(0,4)+"00",county:""}:{province:g.substring(0,2)+"0000",city:g.substring(0,4)+"00",county:b}},formatDate:function(b,c){c||(c="yyyyMMdd");var d={"M+":b.getMonth()+1,"d+":b.getDate(),"h+":b.getHours(),"m+":b.getMinutes(),"s+":b.getSeconds(),"q+":Math.floor((b.getMonth()+
3)/3),S:b.getMilliseconds()};/(y+)/.test(c)&&(c=c.replace(RegExp.$1,(b.getFullYear()+"").substr(4-RegExp.$1.length)));for(var e in d)RegExp("("+e+")").test(c)&&(c=c.replace(RegExp.$1,1==RegExp.$1.length?d[e]:("00"+d[e]).substr((""+d[e]).length)));return c},generateUUid:function(){for(var b="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),c=Array(36),d=0,e,f=0;36>f;f++)8==f||13==f||18==f||23==f?c[f]="-":14==f?c[f]="4":(2>=d&&(d=33554432+16777216*Math.random()|0),e=d&15,d>>=
4,c[f]=b[19==f?e&3|8:e]);return c.join("").replace(/-/g,"")},number2Money:function(b){if(0==b&&""!=$.trim(b))return"\u96f6\u5143\u6574";if(!/^([1-9]\d*|0)(\.\d+)?$/.test(b)||!b)return"";var c="\u96f6\u58f9\u8d30\u53c1\u8086\u4f0d\u9646\u67d2\u634c\u7396".split(""),d=" \u62fe \u4f70 \u4edf \u4e07 \u4ebf \u5143 ".split(" "),e=["\u89d2","\u5206"],b=(""+b).split(".");b[1]&&(b[1].match(/^0{2}/)||b[1].match(/^0$/)?b.pop():b[1].match(/^[1-9]0/)&&(b[1]=b[1][0]));k=0;re="";if(0<b[0])for(var f=b[0].length-
1;0<=f;f--){switch(k){case 0:re=d[7]+re;break;case 4:RegExp("0{4}\\d{"+(b[0].length-f-1)+"}$").test(b[0])||(re=d[4]+re);break;case 8:re=d[5]+re,d[7]=d[5],k=0}0!=k%4&&("0"==b[0].charAt(f)&&""!=b[0].charAt(f+1)&&"0"!=b[0].charAt(f+1))&&(re=c[0]+re);0!=b[0].charAt(f)&&(re=c[b[0].charAt(f)]+d[k%4]+re);k++}if(1<b.length){0<b[0]&&(re+=d[6]);for(f=0;f<b[1].length&&1>=f;f++)"0"==b[1].charAt(f)?0<b[0]&&(re+=c[0]):re+=c[b[1].charAt(f)]+e[f]}else re+="\u5143\u6574";return re},number2Money2:function(b){if("number"==
typeof b)b=b.toString();else if("string"==typeof b)b=this.trim(b);else return 0;if(!b)return 0;var c=b.indexOf("."),d,e=/(\d+)(\d{3})/;if(0<=c){d=b.substring(0,c)||"0";for(b=b.substring(c+1,b.length);e.test(d);)d=d.replace(e,"$1,$2");b=d+"."+b}else for(;e.test(b);)b=b.replace(e,"$1,$2");return b},getClientVersion:function(){var b="";if(PJF.communication.client.isInP2())try{var c=PJF.communication.client.getClientEnv("localVersion"),b=0==c[0]?c[1]:b}catch(d){}return b},isCrossDomain:function(b){var c,
d=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/;try{c=location.href}catch(e){c=document.createElement("a"),c.href="",c=c.href}c=d.exec(c.toLowerCase())||[];b=(b||"").replace(/#.*$/,"").replace(/^\/\//,c[1]+"//");b=d.exec(b.toLowerCase());return!(!b||!(b[1]!==c[1]||b[2]!==c[2]||(b[3]||("http:"===b[1]?80:443))!=(c[3]||("http:"===c[1]?80:443))))}};mySeed=0;
PJF.util.Collection=function(b,c){this.items=[];this.map={};this.keys=[];this.length=0;this.id=mySeed++;this.allowFunctions=!0===b;c&&(this.getKey=c)};PJF.util.array=function(){return{indexOf:function(b,c,d){for(var e=b.length,d=d||0,d=d+(0>d?e:0);d<e;++d)if(b[d]===c)return d;return-1}}}();PJF.util.string=function(){return{replaceall:function(b,c,d){return b.replace(RegExp(c,"gm"),d)},startWith:function(b,c){return RegExp("^"+c).test(b)},endWith:function(b,c){return RegExp(c+"$").test(b)}}}();
PJF.apply(PJF.util.Collection.prototype,{allowFunctions:!1,add:function(b,c){1==arguments.length&&(c=arguments[0],b=this.getKey(c));if("undefined"!=typeof b&&null!==b){if("undefined"!=typeof this.map[b])return this.replace(b,c);this.map[b]=c}this.length++;this.items.push(c);this.keys.push(b);return c},getKey:function(b){return b.id},replace:function(b,c){1==arguments.length&&(c=arguments[0],b=this.getKey(c));var d=this.map[b];if("undefined"==typeof b||null===b||"undefined"==typeof d)return this.add(b,
c);d=this.indexOfKey(b);this.items[d]=c;return this.map[b]=c},addAll:function(b){if(1<arguments.length||"array"==PJF.util.getType(b))for(var c=1<arguments.length?arguments:b,d=0,e=c.length;d<e;d++)this.add(c[d]);else for(c in b)(this.allowFunctions||"function"!=typeof b[c])&&this.add(c,b[c])},each:function(b,c){for(var d=[].concat(this.items),e=0,f=d.length;e<f&&!1!==b.call(c||d[e],d[e],e,f);e++);},eachKey:function(b,c){for(var d=0,e=this.keys.length;d<e&&!1!==b.call(c||window,this.keys[d],this.items[d],
d,e);d++);},find:function(b,c){for(var d=0,e=this.items.length;d<e;d++)if(b.call(c||window,this.items[d],this.keys[d]))return this.items[d];return null},insert:function(b,c,d){2==arguments.length&&(d=arguments[1],c=this.getKey(d));this.containsKey(c)&&(this.suspendEvents(),this.removeKey(c),this.resumeEvents());if(b>=this.length)return this.add(c,d);this.length++;this.items.splice(b,0,d);"undefined"!=typeof c&&null!==c&&(this.map[c]=d);this.keys.splice(b,0,c);return d},remove:function(b){return this.removeAt(this.indexOf(b))},
removeAt:function(b){if(b<this.length&&0<=b){this.length--;var c=this.items[b];this.items.splice(b,1);var d=this.keys[b];"undefined"!=typeof d&&delete this.map[d];this.keys.splice(b,1);return c}return!1},removeKey:function(b){return this.removeAt(this.indexOfKey(b))},getCount:function(){return this.length},indexOf:function(b){return PJF.util.array.indexOf(this.items,b)},indexOfKey:function(b){return PJF.util.array.indexOf(this.keys,b)},item:function(b){var c=this.map[b],b=void 0!==c?c:"number"==typeof b?
this.items[b]:void 0;return"function"!=typeof b||this.allowFunctions?b:null},itemAt:function(b){return this.items[b]},key:function(b){return this.map[b]},contains:function(b){return-1!=this.indexOf(b)},containsKey:function(b){return"undefined"!=typeof this.map[b]},clear:function(){this.length=0;this.items=[];this.keys=[];this.map={}},first:function(){return this.items[0]},last:function(){return this.items[this.length-1]},_sort:function(b,c,d){var e,f="DESC"==String(c).toUpperCase()?-1:1,g=[],h=this.keys,
l=this.items,d=d||function(b,c){return b-c},c=0;for(e=l.length;c<e;c++)g[g.length]={key:h[c],value:l[c],index:c};g.sort(function(c,e){var g=d(c[b],e[b])*f;0===g&&(g=c.index<e.index?-1:1);return g});c=0;for(e=g.length;c<e;c++)l[c]=g[c].value,h[c]=g[c].key},sort:function(b,c){this._sort("value",b,c)},reorder:function(b){var c=this.items,d=0,e=c.length,f=[],g=[],h;for(h in b)f[b[h]]=c[h];for(d=0;d<e;d++)void 0==b[d]&&g.push(c[d]);for(d=0;d<e;d++)void 0==f[d]&&(f[d]=g.shift());this.clear();this.addAll(f);
this.resumeEvents()},keySort:function(b,c){this._sort("key",b,c||function(b,c){var f=String(b).toUpperCase(),g=String(c).toUpperCase();return f>g?1:f<g?-1:0})},getRange:function(b,c){var d=this.items;if(1>d.length)return[];var b=b||0,c=Math.min("undefined"==typeof c?this.length-1:c,this.length-1),e,f=[];if(b<=c)for(e=b;e<=c;e++)f[f.length]=d[e];else for(e=b;e>=c;e--)f[f.length]=d[e];return f},filter:function(b,c,d,e){if(Ext.isEmpty(c,!1))return this.clone();c=this.createValueMatcher(c,d,e);return this.filterBy(function(d){return d&&
c.test(d[b])})},filterBy:function(b,c){var d=new Ext.util.MixedCollection;d.getKey=this.getKey;for(var e=this.keys,f=this.items,g=0,h=f.length;g<h;g++)b.call(c||this,f[g],e[g])&&d.add(e[g],f[g]);return d},findIndex:function(b,c,d,e,f){if(Ext.isEmpty(c,!1))return-1;c=this.createValueMatcher(c,e,f);return this.findIndexBy(function(d){return d&&c.test(d[b])},null,d)},findIndexBy:function(b,c,d){for(var e=this.keys,f=this.items,d=d||0,g=f.length;d<g;d++)if(b.call(c||this,f[d],e[d]))return d;return-1},
createValueMatcher:function(b,c,d,e){if(!b.exec){var f=Ext.escapeRe,b=String(b);!0===c?b=f(b):(b="^"+f(b),!0===e&&(b+="$"));b=RegExp(b,d?"":"i")}return b},clone:function(){for(var b=new Ext.util.MixedCollection,c=this.keys,d=this.items,e=0,f=d.length;e<f;e++)b.add(c[e],d[e]);b.getKey=this.getKey;return b}});PJF.namespace("PJF.validator");
PJF.validator.base={isNum:{key:"number",fn:function(b){return b?null==b.match(/\D/):!1}},isDigit:{key:"digit",fn:function(b){return null==b.match(/^-?\d+(\.\d+)?$/g)?!1:!0}},isInt:{key:"int",fn:function(b){return null==b.match(/^[-+]?\d*$/)?!1:!0}},pInt:{key:"pInt",fn:function(b){return b.match(/^\+?[1-9][0-9]*$/)?!0:!1}},notNegaInt:{key:"notNegaInt",fn:function(b){return b.match(/^(0|[1-9]\d*)$/)?!0:!1}},pNum:{key:"pNum",fn:function(b){return b.match(/^[\+]?[0-9]*\d(\.\d+)?$/)&&0<parseFloat(b)?!0:
!1}},greaterZero:{key:"gZero",fn:function(b){return b.match(/^[\+]?[0-9]*\d(\.\d+)?$/)?!0:!1}},isChinese:{key:"chinese",fn:function(b){return-1!=escape(b).indexOf("%u")?!0:!1}},isEmail:{key:"email",fn:function(b){return null==b.match(/^(\w)+(\.\w+)*@(\w)+((\.\w{2,3}){1,3})$/)?!1:!0}},isMobile:{key:"mobile",fn:function(b){return null==b.match(/^1\d{2}-?\d{5}(\d{3}|\*{3})$/)?!1:!0}},isTel:{key:"tel",fn:function(b){return null==b.match(/^(([0\+]\d{2,3}-)?(0\d{2,3})-)(\d{7,8})(-(\d{3,}))?$/)?!1:!0}},
isIDCard:{key:"IDCard",fn:function(b){var c=/^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])((\d{4})|\d{3}[Xx])$/;if(15==b.length)var d=new Number("19"+b.slice(6,8)),e=new Number(b.slice(8,10))-1,f=new Number(b.slice(10,12));else 18==b.length&&(d=new Number(b.slice(6,10)),e=new Number(b.slice(10,12))-1,f=new Number(b.slice(12,14)));var g=new Date(d,e,f),h=new Date;return null==b.match(/^[1-9]\d{7}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}$/)&&null==b.match(c)?!1:1900>d||g>h?!1:g.getFullYear()==
d&&g.getMonth()==e&&g.getDate()==f?!0:!1}},is18IDCard:{key:"18IDCard",fn:function(b){var c=new Number(b.slice(6,10)),d=new Number(b.slice(10,12))-1,e=new Number(b.slice(12,14)),f=new Date(c,d,e),g=new Date;return null==b.match(/^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])((\d{4})|\d{3}[Xx])$/)?!1:1900>c||f>g?!1:f.getFullYear()==c&&f.getMonth()==d&&f.getDate()==e?!0:!1}},isName:{key:"user",fn:function(b){var c=/^[\s]|[\u4E00-\u9FA5]\s/,d=/[a-z]/,e=/([\uFF00-\uFF07] | [\uFF0A-\uFFEF] | [\u3000-\u3009] | [\u300C-\u303F])/;
return b.match(/(\\|:|\/|\*|\?|\"|>|<|\|)/)||b.match(c)||b.match(d)||b.match(e)?!1:!0}},isCnNumEn:{key:"isCnNumEn",fn:function(b){return b.match(/^[\u4e00-\u9fff\u3400-\u4DB5\uF900-\uFA2D\uFA30-\uFA6A\uFA70-\uFAD9\uFF00-\uFFEF\u2E80-\u2EFF\u3000-\u303F\u31C0-\u31EF\ue815-\ue864\ue000-\uefffA-Za-z0-9]*$/)?!0:!1}},iciUserName:{key:"iciUserName",fn:function(b){return!b.match(RegExp("^([\u4e00-\u9fff\u3400-\u4db5\uf900-\ufa2d\ufa30-\ufa6a\ufa70-\ufad9\uff00-\uffef\u2e80-\u2eff\u3000-\u303f\u31c0-\u31ef\ue815-\ue864\ue000-\uefffA-Za-z])+((\u00b7| )([\u4e00-\u9fff\u3400-\u4db5\uf900-\ufa2d\ufa30-\ufa6a\ufa70-\ufad9\uff00-\uffef\u2e80-\u2eff\u3000-\u303f\u31c0-\u31ef\ue815-\ue864\ue000-\uefffA-Za-z])+)*$"))||
b.match("([\u4e00-\u9fff\u3400-\u4db5\uf900-\ufa2d\ufa30-\ufa6a\ufa70-\ufad9\uff00-\uffef\u2e80-\u2eff\u3000-\u303f\u31c0-\u31ef\ue815-\ue864\ue000-\uefff])( )+([\u4e00-\u9fff\u3400-\u4db5\uf900-\ufa2d\ufa30-\ufa6a\ufa70-\ufad9\uff00-\uffef\u2e80-\u2eff\u3000-\u303f\u31c0-\u31ef\ue815-\ue864\ue000-\uefff])")||b.match("([\u4e00-\u9fff\u3400-\u4db5\uf900-\ufa2d\ufa30-\ufa6a\ufa70-\ufad9\uff00-\uffef\u2e80-\u2eff\u3000-\u303f\u31c0-\u31ef\ue815-\ue864\ue000-\uefff]( )+[A-Za-z])|([A-Za-z]( )+[\u4e00-\u9fff\u3400-\u4db5\uf900-\ufa2d\ufa30-\ufa6a\ufa70-\ufad9\uff00-\uffef\u2e80-\u2eff\u3000-\u303f\u31c0-\u31ef\ue815-\ue864\ue000-\uefff])")||
b.match(/[A-Za-z]+( ){2,}[A-Za-z]+/)||-1!=b.indexOf("\u00b7")&&b.match(/([A-Za-z]| )/)?!1:!0}},isSpecChar:{key:"specChar",fn:function(b){var c=/(\uFF3C|\uFF0F|\uFF1A|\uFF0A|\uFF1F|\uFF02|\uFF1C|\uFF1E|\uFF5C)/;return b.match(/(^[\s]|\\|:|\/|\*|\?|\"|>|<|\|)/)||b.match(c)?!1:!0}},length:{key:"length",fn:function(b,c){if(c){if(1==c.length)return b.length==c[0];if(2==c.length)return b.length<=c[1]&&b.length>=c[0]}return!0}},isNumberOrLetter:{key:"isNumberOrLetter",fn:function(b){return b.match(/^[A-Za-z0-9]+$/)?
!0:!1}},isChnChar:{key:"isChnChar",fn:function(b){return b.match(/[\u4E00-\u9FA5]/)?!0:!1}},decLength:{key:"decLength",fn:function(b,c){if(c){var d="^-?([0-9])+(\\.[0-9]{1,"+c[1]+"})?$",e=b.split(".");return!b.match(d)||e[0].length>c[0]?!1:!0}}},byteLength:{key:"byteLength",fn:function(b,c){var d;if(c){(d=b.match(/[^\x00-\xff]/g))||(d="");d=b.length-d.length+3*d.length;if(1==c.length)return d==c[0];if(2==c.length)return d<=c[1]&&d>=c[0]}return!0}},isStrNumPwd:{key:"isStrNumPwd",fn:function(b,c){var d=
[];d.push(function(b){return b.match(/^[0-9]{6}$/g)});d.push(function(b){return!b.match(/^([0-9]{1})\1{5}$/g)});d.push(function(b){for(var c=!0,d=0;d<b.length-1;d++)if(1!=b.charCodeAt(d)-b.charCodeAt(d+1)){c=!1;break}for(var e=!0,d=0;d<b.length-1;d++)if(1!=b.charCodeAt(d+1)-b.charCodeAt(d)){e=!1;break}return!c&&!e});d.push(function(b){return b.match(/^([0-9]{1})\1{1}([0-9]{1})\2{1}([0-9]{1})\3{1}$/g)||b.match(/^([0-9]{1})\1{2}([0-9]{1})\2{2}$/g)?!1:!0});d.push(function(b,c){return c.match(/^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])((\d{4})|\d{3}[Xx])$/)&&
"0"==c[10]&&"0"==c[12]&&b.substring(0,4)==c.substring(6,10)&&b[4]==c[11]&&b[5]==c[13]||-1!=c.indexOf(b)?!1:!0});for(var e=0;e<d.length;e++)if(!d[e].call(this,b,c))return!1;return!0}},loanAccount:{key:"loanAccount",fn:function(b,c){var d;if(c)return(d=b.match("\\d{2}\\s\\d{3}\\s\\d{3}\\s\\d{4}-\\d{14}"))?!0:!1}},zipCode:{key:"zipCode",fn:function(b){return b.match(/^[0-9]\d{5}$/)?!0:!1}},numFixedFormat:{key:"numFixedFormat",fn:function(b,c){if(!c||2!=c.length)return alert("numFixedFormat \u53c2\u6570\u683c\u5f0f\u9519\u8bef ,\u683c\u5f0f\u4e3a[int,int]"),
!1;var d=c[0]||1,e=c[1];if(/^-0$/.test(b))return!1;var d="^[-]?(([1-9]\\d{0,"+(d-1)+"})|([0]))",f="",f=0<e?"(\\.\\d{1,"+e+"})?$":"$";console.log(d+f);return RegExp(d+f).test(b)}}};PJF.validator.rules=function(){if(PJF.validator.base){var b=PJF.validator.base,c={},d;for(d in b)c[b[d].key]=b[d].fn;return c}};PJF.validator.validate=function(b,c,d){for(var d=(d||"").split(","),e=PJF.validator.rules(),f=0;f<d.length;f++)if(e[d[f]]&&!e[d[f]](b,c))return d[f]};
PJF.validator.expand=function(b){PJF.apply(PJF.validator.base,b);var b=PJF.validator.rules(),c={},d=function(b){return{fn:function(c,d){return PJF.validator.validate(c,d,b)?!1:!0}}},e;for(e in b)c[e]={validator:d(e).fn,message:e+"!"};$.extend($.fn.validatebox.defaults.rules,c)};PJF.namespace("PJF.html");
PJF.html={getAreaData:function(b,c){b||alert("PJF.html.getAreaData"+resource.GETAREADATA_ISFORMIDNULL_INFO1+"formId"+resource.GETAREADATA_ISFORMIDNULL_INFO2);domId="#"+b;for(var d=[],e=[],f=$(domId).find("input[datatype='money'],input[datatype='card']"),g=0;g<f.length;g++){var h=f.eq(g).val();d.push(h);h=h.replace(RegExp(",","gm"),"");h=h.replace(RegExp(" ","gm"),"");e.push(h);f.eq(g).val(e[g])}var l;l=!0===c?$("li:visible input,li:visible select,textarea:visible",domId).serializeArray():$(domId).serializeArray();
if($.browser.safari){var m=$("form",$(domId));m.each(function(b){l=l.concat($(m[b]).serializeArray())})}for(g=0;g<f.length;g++)f.eq(g).val(d[g]);if(l){var d={},n;for(n in l)d[l[n].name]?(d[l[n].name]instanceof Array||(e=d[l[n].name],d[l[n].name]=[],d[l[n].name].push(e)),d[l[n].name].push(PJF.util.trim(l[n].value))):(l[n].value||(l[n].value=""),e=PJF.util.trim(l[n].value),e=e.replace(RegExp("\r","gm"),"\\r"),e=e.replace(RegExp("\n","gm"),"\\n"),d[l[n].name]=e);return d}},setAreaData:function(b,c,d,
e,f,g){if(b){var h;null==e&&(e=!0);for(var l in b)if(b[l]||!0===f){var m=l;d&&(m=d+"_"+l);if(h=c&&!0===g?$("#"+c).find("#"+m)[0]:PJF.html.getDom(m)){var n=$(h).attr("datatype");if("text"==h.type||"textarea"==h.type||"hidden"==h.type){"textarea"==h.type&&(b[l]=PJF.util.string.replaceall(b[l],"\\\\r","\r"),b[l]=PJF.util.string.replaceall(b[l],"\\\\n","\n"));h.value=b[l];if(e&&""!=h.value&&void 0==$(h).attr("autocomplete")&&"datebox-f combo-f"!=h.className&&"datebox-f combo-f pjf_disabled_input"!=h.className){if((!0==
h.disabled||"none"==h.display)&&"money"!=n&&"card"!=n)continue;try{$(h).trigger("focus"),$(h).trigger("blur"),$(h).siblings("div.errorbox_ipt_help").remove()}catch(q){}}if($(h).attr("autocomplete")){var p=$(h).attr("id"),n=$(h).siblings("input:hidden").val();(p=PJF.ui.componentMgr.get(p))?(p.setValue(b[l]),p.getValue()?$(h).removeAttr("error"):($(h).siblings("input:hidden").val(n),$(h).val(b[l]))):$(h).val(b[l])}(null!=h.className.match(/(\s|^)datebox-f combo-f(\s|$)/)||null!=h.className.match(/(\s|^)combo-f datetimebox-f(\s|$)/))&&
$(h).next().find("input").each(function(){this.value=b[l];e&&"disabled"!=$(h).next().find("input:first").attr("disabled")&&($(h).next().find("input:first").trigger("focus"),$(h).next().find("input:first").trigger("blur"))});if(null!=h.className.match(/(\s|^)timespinner(\s|$)/)){var r=b[l];(4==r.length||6==r.length)&&!(0<r.indexOf(":"))?(n=r.substr(0,2),p=r.substr(2,2),p=(r=r.substr(4,2))?n+":"+p+":"+r:n+":"+p,n=b[l],$(h).parent().find("input").val(p)):n=b[l].replace(RegExp(":","gm"),"");$(h).parent().next("input").val(n);
$(h).parent().find("input").trigger("blur")}if($(h).prev().children("input").hasClass("spinner-text")&&$(h).prev().children("input").hasClass("timespinner")){r=b[l];if((4==r.length||6==r.length)&&!(0<r.indexOf(":")))n=r.substr(0,2),p=r.substr(2,2),r=p=(r=r.substr(4,2))?n+":"+p+":"+r:n+":"+p;n=b[l].replace(":","").replace(":","").replace(":","");$(h).prev().find("input").val(r);$(h).val(n);$(h).prev().find("input").trigger("focus");$(h).prev().find("input").trigger("blur")}PJF.util.string.startWith(h.className,
"combo-text")&&$(h).next().next().each(function(){this.value=b[l];e&&"disabled"!=$(h).attr("disabled")&&($(h).trigger("focus"),$(h).trigger("blur"))})}else if("select-one"==h.type)for(n=0;n<h.options.length;n++){if(h.options[n].value==b[l]){h.options[n].selected=!0;$(h).siblings("input").val($(h.options[n]).text());b[l]&&$(h).siblings("input").removeAttr("error").removeClass("validatebox-tipcolor error-border").siblings("div.errorbox_ipt_help").remove();break}}else if("select-multiple"==h.type){if(b[l]instanceof
Array){n=[];for(p=0;p<b[l].length;p++)for(r=0;r<h.options.length;r++)if(h.options[r].value==b[l][p]){h.options[r].selected=!0;n.push($(h.options[r]).text());break}0<n.length&&($(h).siblings("input").val(n.toString()),$(h).siblings("input").removeAttr("error").removeClass("validatebox-tipcolor error-border").siblings("div.errorbox_ipt_help").remove())}}else"radio"==h.type||"checkbox"==h.type?$("#"+c+" input[name="+h.name+"]").each(function(){this.value==b[l]&&(this.checked=!0)}):void 0==h.type&&(n=
$("#"+m).find("select"),n.length?n.each(function(){this.value=b[l];$(this).val(b[l]);var c=$(this).find("option:selected").text();$(this).siblings("input").val(c);this.value&&$(this).siblings("input").removeAttr("error").removeClass("validatebox-tipcolor error-border").siblings("div.errorbox_ipt_help").remove()}):(n=$("#"+m).find('input[type="text"]'),n.length?n.each(function(){this.value=b[l]}):(n=$("#"+m).find('input[type="radio"]'),n.length?(n.each(function(){this.value==b[l]&&(this.checked=!0)}),
0<$("#"+m).find("input:checked").length&&$("#"+m).removeAttr("error").removeClass("validatebox-tipcolor").css("border","none").siblings("div.errorbox_ipt_help").remove()):(n=$("#"+m).find('input[type="checkbox"]'),n.length?n.each(function(){this.checked=!1;if(b[m]&&b[m]instanceof Array)for(var c in b[l])this.value==b[l][c]&&(this.checked=!0);else this.value==b[l]&&(this.checked=!0);this.checked&&$("#"+m).removeAttr("error").removeClass("validatebox-tipcolor").css("border","none").siblings("div.errorbox_ipt_help").remove()}):
($("#"+m).empty(),$("#"+m).html(b[l]))))))}}}},displayArea:function(b,c){if(c){$("#"+b).show().find("*").each(function(){this.css&&"datebox-f combo-f"!=this.css&&this.show()});$("#"+b).prev("div.pjf_quanju").show();var d=$("div.datagrid-view",$("#"+b));d.length&&$("div[componenttype='PJF.ui.grid']",d).each(function(){var b=$(this).attr("componentid");(b=PJF.ui.componentMgr.get(b))&&b.resize()})}else $("#"+b).hide(),$("#"+b).prev("div.pjf_quanju").hide()},validateForm:function(b,c,d,e,f){if(b){var g=
$("#"+b),h=PJF.constants.FORM_PANEL,l;!$("#formPanel_"+b)[0]&&(h&&e)&&(g.wrap('<div id="formPanel_'+b+'"></div>'),(l=g.parent().prev().find("h2").text())&&g.parent().prev().find("h2").parent().hide());b=new PJF.ui.panel({dom:"formPanel_"+b,title:l});(c=g.validform({message:c,invalidROFlag:d,partDoms:f}))&&b&&b.collapse();return c}return!0},validateFormDiff:function(b,c,d){var e=!0;if(b){var e="",f=$("#"+b),b=PJF.html.getAreaData(b,!0),g={},h;for(h in b)for(var l in d)if(h==l){if(b[h]instanceof Array&&
d[l]instanceof Array?b[h].sort().join()!=d[l].sort().join():b[h].replace(/(\\r\\n)|(\\r)|(\\n)/g,"**_**")!=d[l].replace(/(\\r\\n)|(\\r)|(\\n)/g,"**_**")){if(f.children()){var m=f.find("[name='"+h+"']");if(0<m.length){var n=m.eq(0).parents("li:first").find("label:first"),q=m.eq(0).parents("li:first").find("[componentid]"),q=q.eq(0),p=q.attr("componenttype");"PJF.ui.dateinput"==p?q=q.siblings("span"):"PJF.ui.dateSpan"==p?q=m.eq(0).parents("span:first"):"PJF.ui.timespinnerSpan"==p?q=m.eq(0).prev("span"):
"PJF.ui.buttonInput"==p?q=q.find("[componenttype='PJF.ui.textfield']").eq(0):"PJF.ui.select"==p&&(q.find("span").eq(0).attr("style","border-color: red;"),q=q.find("input").eq(0),q.attr("style","position: relative; border-color: red;"));m=n.text();"undefined"==typeof g[m]&&(e+="<li>",e+="<span class='black'>"+n.text()+"</span>\u8f93\u5165\u5185\u5bb9\u4e0d\u5339\u914d</li>",g[m]="1");q.tips&&q.tips.remove();q.tips=null}}}else f.children()&&(m=f.find("[name='"+h+"']"),0<m.length&&(q=m.eq(0).parents("li:first").find("[componentid]"),
q=q.eq(0),p=q.attr("componenttype"),"PJF.ui.checkbox"==p&&(q.removeClass("validatebox-invalid validatebox-tipcolor error-border"),q.attr("style",""))));break}f.attr("alt",e);c=c||"\u586b\u5199\u5185\u5bb9\u9519\u8bef";d="<div class='pjf_quanju' id='"+f.attr("id")+"_qj'><p>"+resource.GLOBALCHECK_MSG1+"</p><ul class='pjf_global_ul'></ul><div class='pjf_globale_div'>"+c+"</div></div>";if(""!=e){$("#"+f.attr("id")+"_qj");var r=$("#"+f.attr("id")+"_qj").length;0==r&&f.before(d);$("#"+f.attr("id")+"_qj").find(".pjf_global_ul").html(f.attr("alt")).next("div.pjf_globale_div").html(c);
$("#"+f.attr("id")+"_qj").width($("#"+f.attr("id")+"_qj").next().width()-100);e=!1}else 0!=r&&$("#"+f.attr("id")+"_qj").remove(),e=!0}return e},submitForm:function(b){b&&(b=$("#"+b),b.form("validate")&&b.submit())},disableArea:function(b,c){var d=!0;2==arguments.length&&(d=c);var e=$("#"+b);d?($("select",e).each(function(){$(this).attr("disabled","disabled")}),e.find(".pjf_single_span").each(function(){var b=$(this).attr("id");$("#"+b).die("click")}),e.find(".pjf_orgText").each(function(){var b=$(this).attr("componentId");
PJF.ui.componentMgr.get(b).disable()}),$("input,textarea",e).each(function(){this.disabled="disabled";var b=$(this);b.addClass("pjf_disabled_input");var c=b.parent();(c.is("span.validatebox-textBox")||c.is("span.combo"))&&b.parent().addClass("pjf_disabled_input").end().css("border-width","0");$(this).removeClass("validatebox-tipcolor error-border warnbox-tipcolor warn-border");b.parent().is("span")&&(b.parent().removeClass("validatebox-tipcolor error-border warnbox-tipcolor warn-border"),b.siblings("span.point_box").removeClass("validatebox-spanicon warnbox-spanicon"));
$(this).next(".warnbox_ipt_help").remove();$(this).next(".errorbox_ipt_help").remove()}),e.find(".combo-arrow").unbind("click").unbind("mouseenter").unbind("mouseleave"),e.find(".spinner-arrow-up").unbind("click").unbind("mouseenter").unbind("mouseleave"),e.find(".spinner-arrow-down").unbind("click").unbind("mouseenter").unbind("mouseleave"),e.find(".validatebox-checkbox").removeClass("validatebox-tipcolor").css("border","none"),e.find(".validatebox-checkbox").attr("disabled","disabled")):($("select",
e).each(function(){$(this).removeAttr("disabled","disabled")}),e.find(".pjf_orgText").each(function(){var b=$(this).attr("componentId");PJF.ui.componentMgr.get(b).enable()}),e.find(".pjf_single_span").each(function(){var b=$(this).attr("id");$("#"+b).siblings("input").removeAttr("disabled").removeClass("pjf_disabled_input");$("#"+b).live("click",function(){PJF.constants.KEYBOARD_ENABLE?$(this).siblings("input").trigger("click"):$(this).siblings("input").trigger("focus")})}),$("input,textarea",e).each(function(){this.disabled=
"";$(this).removeClass("pjf_disabled_input");var b=$(this).parent();(b.is("span.validatebox-textBox")||b.is("span.combo"))&&$(this).parent().removeClass("pjf_disabled_input").end().css("border-width","0")}),e.find(".datebox-f").each(function(){$("#"+this.id).datebox("enable")}),e.find(".datetimebox-f").each(function(){$("#"+this.id).datetimebox("enable")}),e.find(".spinner-text").each(function(){$("#"+this.id).timespinner("enable")}),e.find(".validatebox-checkbox").removeAttr("disabled"))},readOnlyArea:function(b,
c){var d=!0;2==arguments.length&&(d=c);var e=$("#"+b);d?(e.find(".pjf_select_input").each(function(){var b=$(this).siblings("select").attr("componentId");b||(b=$(this).parent().attr("componentId"));PJF.ui.componentMgr.get(b).setReadOnly(!0)}),e.find(".pjf_orgText").each(function(){var b=$(this).attr("componentId");PJF.ui.componentMgr.get(b).setReadOnly(!0)}),$("input,textarea",e).each(function(){this.readOnly="true";var b=$(this).parent();$(this).addClass("pjf_readonly_input");(b.is("span.validatebox-textBox")||
b.is("span.combo"))&&$(this).parent().addClass("pjf_readonly_input").end().css("border-width","0");e.find(".combo-arrow").unbind("click").unbind("mouseenter").unbind("mouseleave");e.find(".spinner-arrow-up").unbind("click").unbind("mouseenter").unbind("mouseleave");e.find(".spinner-arrow-down").unbind("click").unbind("mouseenter").unbind("mouseleave");e.find(".datebox-f").next().children("input").unbind("keydown.combo")}),$('input[type="checkbox"],input[type="radio"]',e).each(function(){this.onclick=
function(){return!1};$(this).closest("span").addClass("pjf_readonly_input")})):(e.find(".pjf_select_input").each(function(){var b=$(this).siblings("select").attr("componentId");b||(b=$(this).parent().attr("componentId"));PJF.ui.componentMgr.get(b).setReadOnly(!1)}),e.find(".pjf_orgText").each(function(){var b=$(this).attr("componentId");PJF.ui.componentMgr.get(b).setReadOnly(!1)}),$("input,textarea",e).each(function(){null==this.className.match(/(\s|^)pjf_select(\s|$)/)&&(this.readOnly="");"readonly"==
$(this).attr("readFlag")&&(this.readOnly="true");var b=$(this).parent();$(this).removeClass("pjf_readonly_input");(b.is("span.validatebox-textBox")||b.is("span.combo"))&&$(this).parent().removeClass("pjf_readonly_input").end().css("border-width","0");e.find(".datebox-f").each(function(){$("#"+this.id).datebox("enable")});e.find(".datetimebox-f").each(function(){$("#"+this.id).datetimebox("enable")});e.find(".spinner-text").each(function(){$("#"+this.id).timespinner("enable")})}),$('input[type="checkbox"],input[type="radio"]',
e).each(function(){this.onclick=function(){return!0};$(this).closest("span").removeClass("pjf_readonly_input")}))},clearForm:function(b){b&&(b=$("#"+b),$("input,select,textarea",b).each(function(){var b=this.type,d=this.tagName.toLowerCase();"disabled"!=$(this).attr("disabled")&&("text"==b||"hidden"==b||"password"==b||"textarea"==d?this.value="":"file"==b?(b=$(this),b.after(b.clone().val("")),b.remove()):"checkbox"==b||"radio"==b?this.checked=!1:"select"==d&&(this.selectedIndex=-1))}),b.find("li").find("input:not('.pjfcheckbox-input'),select,textarea,span").removeClass("validatebox-tipcolor validatebox-invalid warnbox-tipcolor error-border warn-border"),
b.find("li").find("span.point_box").removeClass("validatebox-spanicon warnbox-spanicon"),b.find("li").find("input,select,textarea,span").filter(".invalid_box").addClass("validatebox-invalid"),b.find("li span.validatebox-checkbox").css("border-width","0px"),b.find("li").find(".errorbox_ipt_help,.warnbox_ipt_help").remove(),$(".pjf_quanju").remove(),b.find("select").each(function(){if("disabled"!=$(this).attr("disabled")){for(var b=0;b<this.options.length;b++)this.options[b].removeAttribute("selected");
this.options[0]&&(this.options[0].selected=!0);$(this).siblings("input.pjf_select").val($(this).find("option:selected").text())}}))},getDom:function(b){return $("#"+b)[0]},getOpener:function(){return!window.top.opener?null:self!=top&&window.top.document.getElementById("proxyFrame")?window.top.window.opener.document.getElementById("proxyFrame")?window.top.window.opener.frames[0]:window.top.window.opener:window.opener},bodyReady:function(b){var c=function(){var c=(new Date).getTime();console.log("\u5f00\u59cb\u6267\u884cbodyReady");
PJF.communication.client.isInP2()&&(window.onerror=function(b,c,d){PJF.communication.client.logError(b,c,d);return!1});$.messager.defaults={ok:resource.MESSAGER_DEFAULTS_OK,cancel:resource.MESSAGER_DEFAULTS_CANCEL};PJF.validator.expand({});if(PJF.communication.client.isInP2())try{sendNSCommand("getUserInfo")}catch(e){alert(resource.SENDNSCOMMAND_CATCH)}else if(top!=self&&top.PJF&&top.PJF.constants&&top.PJF.constants.IS_BSLOGIN_MODEL){var f=PJF,g;top.PJF_USERINFO?g=top.PJF_USERINFO:(alert(resource.GETUSERINFO_FAILURE),
g=void 0);f.userInfo=g;f=PJF;top.PJF_ORGINFO?g=top.PJF_ORGINFO:(alert(resource.GETORGINFO_FAILURE),g=void 0);f.orgInfo=g;f=PJF;top.PJF_POSITIONINFO?g=top.PJF_POSITIONINFO:(alert(resource.GETROLEINFO_FAILURE),g=void 0);f.roleInfo=g;f=PJF;top.PJF_OTHERINFO?g=top.PJF_OTHERINFO:(alert(resource.GETOTHERINFO_FAILURE),g=void 0);f.otherInfo=g}else top==self&&PJF.html.getOpener()&&PJF.html.getOpener().top.PJF&&PJF.html.getOpener().top.PJF.constants.IS_BSLOGIN_MODEL?(f=PJF,PJF.html.getOpener().top.PJF_USERINFO?
g=PJF.html.getOpener().top.PJF_USERINFO:(alert(resource.GETUSERINFO_FAILURE),g=void 0),f.userInfo=g,f=PJF,PJF.html.getOpener().top.PJF_ORGINFO?g=PJF.html.getOpener().top.PJF_ORGINFO:(alert(resource.GETORGINFO_FAILURE),g=void 0),f.orgInfo=g,f=PJF,PJF.html.getOpener().top.PJF_POSITIONINFO?g=PJF.html.getOpener().top.PJF_POSITIONINFO:(alert(resource.GETROLEINFO_FAILURE),g=void 0),f.roleInfo=g,f=PJF,PJF.html.getOpener().top.PJF_OTHERINFO?g=PJF.html.getOpener().top.PJF_OTHERINFO:(alert(resource.GETOTHERINFO_FAILURE),
g=void 0),f.otherInfo=g):PJF.constants.IS_DEBUG&&PJF.debug.createClientInfo();f=(new Date).getTime();console.log("PJF bodyReady getuserinfo \u7b49\u82b1\u8d39\u65f6\u95f4:"+(f-c));b();console.log("\u5e94\u7528bodyReady \u51fd\u6570\u6267\u884c\u82b1\u8d39\u65f6\u95f4 : "+((new Date).getTime()-f));console.log("PJF bodyReady \u6267\u884c\u5b8c\u6bd5!")};!1===PJF.constants.IS_ENABLE_RIGHT_CLICK&&(document.onmousedown=function(b){b=b||event;2==b.button&&(b=b.srcElement||b.target,document.oncontextmenu=
"text"==b.type||"textarea"==b.type?new Function("return true;"):new Function("return false;"))},document.oncontextmenu=function(){return!1});$.browser.safari&&(window.onresize=function(){var b=document.body.scrollTop;window.scrollTo(0,b-2);window.scrollTo(0,b+2);window.scrollTo(0,b);window.scrollTo(0,b-2);window.scrollTo(0,b+2);window.scrollTo(0,b)});PJF.constants.IS_BSLOGIN_MODEL&&top!=self?$(document).ready(c):$(window).load(c)},empty:function(b){$("#"+b).empty()},remove:function(b){$("#"+b).remove()},
content:function(b,c){$("#"+b).html(c)},append:function(b,c){$("#"+b).append(c)},template:function(b,c){return $.templates(b).render(c)},getTemplate:function(b){var b=document.getElementById(b),c=$.data(b,"templateObj");c||((c=b.innerHTML||b.text)&&(c=c.replace(/&gt;/g,">").replace(/&lt;/g,"<")),c=$.templates(c),$.data(b,"templateObj",c));return c},render:function(b,c,d){if(b)return"string"===typeof b&&(b=PJF.html.getTemplate(b)),b=b.render(c),d&&$("#"+d).html(b),b},renderDomTemplate:function(b,c){return PJF.html.render(b,
c,b)},addTag:function(b,c){var d={};d[b]=c;$.views.tags(d)},addConverter:function(b,c){var d={};d[b]=c;$.views.converters(d)},addHelper:function(b,c){var d={};d[b]=c;$.views.helpers(d)},addClass:function(b,c){$("#"+b).addClass(c)},removeClass:function(b,c){$("#"+b).removeClass(c)},getClassDoms:function(b){var c=[];$("."+b).each(function(){c.push(this)});return c},bindEvent:function(b,c,d){$(b).bind(c,d)},unbindEvent:function(b,c){$(b).unbind(c)},openWin:function(b,c,d){if(PJF.communication.client.isInP2()&&
top.frames[0]&&!$.browser.safari)var e=function(b){var c=top.frames[0].document.createElement("a");c.href=b;return c.href},b=(""===e("")?function(b){var c=top.frames[0].document.createElement("div");c.innerHTML='<a href="'+b.replace(/"/g,"%22")+'"/>';return c.firstChild.href}:e)(b);if(PJF.communication.client.isInP2())try{g=d?PJF.communication.client.openInnerWindow(b,d):PJF.communication.client.openInnerWindow(b)}catch(f){alert(resource.OPENINNERWINDOW_FAILURE+":"+f),g=window.open(b)}else{var g;
g=d?window.open(b,d):window.open(b)}PJF.communication.client.isInP2()&&(!g||"0"===g[0])&&PJF.communication.client.setTabTitle(c);return g},resetLay:function(){$(".pjf_ul_two , .pjf_content , .div_ulbox , .pjf_content_three").addClass("clearfix")},trigger:function(b,c){$("#"+b).trigger(c)},getAreaChecked:function(b){var c=[];$("#"+b).find("input:checked").each(function(){c.push(this)});return c},upload:function(b,c){if($.browser.safari){var d=PJF.html.getDom(b),e=new FormData(document.forms.namedItem(b)),
f=new XMLHttpRequest;f.open("POST",d.action,!0);f.onload=function(){if(4==f.readyState&&200==f.status)try{c(eval("("+this.responseText+")"))}catch(b){new PJF.ui.messageBox({style:"warning",title:resource.UPLOAD_MESSAGEBOX_TITLE,content:resource.UPLOAD_MESSAGEBOX_DATEERR_CONTENT})}else new PJF.ui.messageBox({style:"warning",title:resource.UPLOAD_MESSAGEBOX_TITLE,content:resource.UPLOAD_MESSAGEBOX_UPLOADERR_CONTENT})};f.send(e)}else{var g=$('<iframe width="0" height="0" id="pjf_upload_frame" name="pjf_upload_frame"/>');
g.appendTo("body");$("#pjf_upload_frame").load(function(){try{c(eval("("+window.frames.pjf_upload_frame.document.body.innerText+")"))}catch(b){}finally{g.remove()}});PJF.html.getDom(b).target="pjf_upload_frame";PJF.html.getDom(b).submit()}},download:function(b){var c=!0;if(-1!=b.indexOf("getLocalFile.action")){var c=!1,d=b.replace("getLocalFile.action?","ecpJson.action?_fw_service_id=localFileExists&");PJF.communication.ajax({url:d,async:!1,success:function(b){b.fileExists?c=!0:new PJF.ui.messageBox({style:"warning",
title:resource.UPLOAD_MESSAGEBOX_TITLE,content:resource.DOWNLOAD_MESSAGEBOX_DOWNERR_CONTENT})}})}c&&PJF.communication.client.openNativeWindow(PJF.html.toAbsURL(b))},redirect:function(b,c){var d=!0;if(-1!=b.indexOf("getLocalFile.action")){var d=!1,e=b.replace("getLocalFile.action?","ecpJson.action?_fw_service_id=localFileExists&");PJF.communication.ajax({url:e,async:!1,success:function(b){b.fileExists?d=!0:new PJF.ui.messageBox({style:"warning",title:resource.UPLOAD_MESSAGEBOX_TITLE,content:resource.DOWNLOAD_MESSAGEBOX_DOWNERR_CONTENT})}})}d&&
($.browser.safari&&-1!=b.indexOf("getLocalFile.action")?PJF.communication.client.openNativeWindow(PJF.html.toAbsURL(b)):(location.href=b,window.event.returnValue=!1,c&&PJF.communication.client.isInP2()&&PJF.communication.client.setTabTitle(c)))},getUrlParam:function(b){b=RegExp("(^|&)"+b+"=([^&]*)(&|$)");b=window.location.search.substr(1).match(b);return null!=b?unescape(b[2]):null},getCurrentWindow:function(){return top==window?window:top},getViewUrl:function(b){if(b){var c;c=PJF.communication.client.encodeUrl(b);
if(0==c[0]&&(c=c[1],c=PJF.communication.client.encodeUrl(PJF.constants.VIEW_PROXY_URL+c),0==c[0]))return b=c[1],PJF.constants.VIEW_DOC_URL+b}return b},closeWin:function(){if(PJF.communication.client.isInP2())try{var b=PJF.communication.client.closeWin();b&&"1"===b[0]&&top.OLD_WINDOW_CLOSE()}catch(c){top.OLD_WINDOW_CLOSE()}else top.close()},documentReady:function(b){b()}};
PJF.html.toAbsURL=function(){var b=function(b){var d=document.createElement("a");d.href=b;return d.href};return""===b("")?function(b){var d=document.createElement("div");d.innerHTML='<a href="'+b.replace(/"/g,"%22")+'"/>';return d.firstChild.href}:b}();PJF.namespace("PJF.communication");PJF.communication.validateAjaxReqParams=function(){return!0};PJF.communication.prepareAjaxReqParams=function(b){if(b.safe&&b.data){var c;c="string"==PJF.util.getType(b.data)?eval(b.data):b.data;if("string"==PJF.util.getType(c.jsonData)){var d=eval("("+c.jsonData+")"),d=PJF.communication.addParam(d);c.jsonData=PJF.util.json2str(d);b.data=c}}b.async=!1!==b.async};PJF.communication.beforeAjaxReq=function(){return!0};PJF.communication.afterAjaxReq=function(){return!0};
PJF.communication.sendAjaxReq=function(b,c,d){$.ajax({url:b.url,dataType:b.dataType||PJF.constants.AJAX_DATA_TYPE,data:c,async:b.async,traditional:b.traditional,type:b.type||PJF.constants.AJAX_METHOD,timeout:b.timeOut||PJF.constants.AJAX_TIMEOUT,success:function(c,d,g){b.success(c,d,g)},error:function(c,d){b.failure?b.failure(c,d):"timeout"==d?PJF.configuration.ajaxTimeOut():"parsererror"==d?PJF.configuration.ajaxParseError():PJF.configuration.ajaxFailure()},complete:function(){PJF.communication.afterAjaxReq(b,
c,d)}})};PJF.communication.ajax=function(b){var c={};if(!1!==PJF.communication.validateAjaxReqParams(b,c)){var d=PJF.communication.prepareAjaxReqParams(b,c)||b.data;if(!1!==PJF.communication.beforeAjaxReq(b,d,c))return PJF.communication.sendAjaxReq(b,d,c)}};
PJF.communication.validateCPSJsonReqParams=function(b){if(!b.fwServiceId||!b.fwTranId||!b.success)return alert("PJF.communication.cpsJsonReq\u53c2\u6570\u4e0d\u6b63\u786e!\u5f53\u524d\u53c2\u6570\u4e3a:fwServiceId="+b.fwServiceId+",fwTranId="+b.fwTranId+",success="+b.success),!1};
PJF.communication.prepareCPSJsonReqParams=function(b,c){PJF.communication.ra&&(b.jsonData=PJF.communication.ra.copyRefuseInfo(b.jsonData));c.copyOfConf=PJF.apply({},b);return PJF.communication.setEcpJsonParam(b.fwServiceId,b.fwTranId,b.jsonData,!0,b.encrypt,b.sqlId,b.fmtPrintId,b)};PJF.communication.beforeCPSJsonReq=function(b,c,d){b.mask?d.ajaxMask=new PJF.ui.loading({dom:b.mask,text:b.loadingText}):b.maskAll&&(d.ajaxMask=new PJF.ui.loading({maskBody:!0,text:b.loadingText}));return!0};
PJF.communication.sendCPSJsonReq=function(b,c,d){return $.ajax({url:b.url||PJF.constants.DEFAULT_ACTION,dataType:b.dataType||PJF.constants.AJAX_DATA_TYPE,data:c,traditional:b.traditional,async:!1!==b.async,type:PJF.constants.AJAX_METHOD,timeout:b.timeOut||PJF.constants.AJAX_TIMEOUT,success:function(c){d.ajaxMask&&(d.ajaxMask.destroy(),d.ajaxMask=void 0);c?("string"==typeof c&&(c=eval("("+c+")")),c.BK_STATUS&&c.BK_STATUS==PJF.constants.BK_CODE_SUCCESS?b.success(c):c._curr_val_key||c._val_page?(PJF.communication.handleAuthResource(c,
d.copyOfConf),PJF.loadResource.PJF_LOAD_RESOURCES_CALLBACK=function(b,c){PJF.communication.cpsJsonReqResend(b,c)}):b.failure(c)):alert("\u63d0\u793a\uff1a\u65e0\u8fd4\u56de\u6570\u636e\uff01")},error:function(c,f){d.ajaxMask&&(d.ajaxMask.destroy(),d.ajaxMask=void 0);"timeout"==f?PJF.configuration.ajaxTimeOut(b.failure):"parsererror"==f?PJF.configuration.ajaxParseError(b.failure):PJF.configuration.ajaxFailure(b.failure)},complete:function(){d.ajaxMask&&(d.ajaxMask.destroy(),d.ajaxMask=void 0);PJF.communication.afterCPSJsonReq(b,
c,d)}})};PJF.communication.afterCPSJsonReq=function(){};PJF.communication.cpsJsonReq=function(b){var c={};if(!1!==PJF.communication.validateCPSJsonReqParams(b,c)){var d=PJF.communication.prepareCPSJsonReqParams(b,c);if(!1!==PJF.communication.beforeCPSJsonReq(b,d,c))return PJF.communication.sendCPSJsonReq(b,d,c)}};
PJF.communication.handleAuthResource=function(b,c,d){PJF.loadResource.PJF_LOAD_RESOURCES_CONF={};PJF.apply(PJF.loadResource.PJF_LOAD_RESOURCES_CONF,c);var e=c.fwServiceId?!1:!0,f=e?c.data.jsonData:c.jsonData,f=f?eval("("+f+")"):{},g=f.ootcData;"IT"==b._curr_val_key&&(f._inte_trl_auth=1);"number"==typeof b._auth_step_no&&(f._auth_step_no=b._auth_step_no+1);"number"==typeof b._curr_val_no&&(f._curr_val_no=b._curr_val_no);f=PJF.util.json2str(f);e?PJF.loadResource.PJF_LOAD_RESOURCES_CONF.data.jsonData=
f:PJF.loadResource.PJF_LOAD_RESOURCES_CONF.jsonData=f;PJF.loadResource._val_msg=b._val_msg;PJF.loadResource.PJF_LOAD_RESOURCES_CONF.fwTranId=e?c.data.transaction_id:c.fwTranId;PJF.loadResource.AUTH_SERVER_RTDATA=b;if("IT"==b._curr_val_key||"SA"==b._curr_val_key||!b._curr_val_key&&b._val_page){if("IT"==b._curr_val_key&&g&&(PJF.communication.ootcTemplate(g),""==PJF.communication.client.OOTC_CONTENT))return;void 0==PJF.html.getDom(PJF.loadResource.PJF_LOAD_RESOURCES_DOM_ID)&&(e=document.createElement("div"),
document.body.appendChild(e),e.setAttribute("id",PJF.loadResource.PJF_LOAD_RESOURCES_DOM_ID));var h=!0;"1"==b.Test_Run&&(h=!1,new PJF.ui.messageBox({style:"confirm",closable:!1,title:"\u6388\u6743\u63d0\u793a",content:"\u8be5\u4ea4\u6613\u5904\u4e8e\u8fdc\u7a0b\u96c6\u4e2d\u6388\u6743\u8bd5\u8fd0\u884c\u671f\uff0c\u786e\u5b9a\u5c06\u8fdb\u884c\u8fdc\u7a0b\u96c6\u4e2d\u6388\u6743\uff0c\u53d6\u6d88\u5c06\u8fdb\u884c\u672c\u5730\u6388\u6743",ok:function(){PJF.communication.ra.initLoading();PJF.communication.client.openAuthPage(b._val_data,
"YGQD");var c=eval("("+b._val_data+")");PJF.communication.ra.registerHandler(c)},cancel:function(){h=!0}}));h&&new PJF.ui.window({dom:PJF.loadResource.PJF_LOAD_RESOURCES_DOM_ID,id:PJF.loadResource.PJF_LOAD_RESOURCES_ID,title:"IT"!=b._curr_val_key?"\u6388\u6743":"\u8bf7\u63d0\u793a\u5ba2\u6237\u786e\u8ba4\u4fe1\u606f",width:420,height:280,showTip:!0,url:CONTEXT_PATH+b._val_page,cache:!1,onClose:function(){d&&d()}})}else"CA"==b._curr_val_key?(PJF.communication.ra.initLoading(),PJF.communication.client.openAuthPage(b._val_data,
"YGQD"),e=eval("("+b._val_data+")"),PJF.communication.ra.registerHandler(e)):"KA"!=b._curr_val_key&&"RW"==b._curr_val_key&&new PJF.ui.messageBox({style:"info",title:"\u53cc\u6572\u590d\u6838",content:b._val_msg,fn:function(){c.interceptParams&&c.interceptParams.rwCallBack&&c.interceptParams.rwCallBack(b)}})};
PJF.communication.cpsJsonReqResend=function(b){var c=PJF.ui.componentMgr.get(PJF.loadResource.PJF_LOAD_RESOURCES_ID);c&&c.destroy();c={};PJF.apply(c,PJF.loadResource.PJF_LOAD_RESOURCES_CONF);var d=c.fwServiceId?c.jsonData:c.data.jsonData,d=d?eval("("+d+")"):{};PJF.loadResource.operIdKey&&(b&&b.CCB_EmpID)&&(b[PJF.loadResource.operIdKey]=b.CCB_EmpID);c.fwServiceId?(b&&(PJF.apply(d,b),c.jsonData=PJF.util.json2str(d)),PJF.communication.cpsJsonReq(c)):(b&&(PJF.apply(d,b),c.data.jsonData=PJF.util.json2str(d)),
PJF.communication.client.isInP2()&&(b=PJF.communication.client.getUniqueNo(),0==b[0]&&(d.ATCH_BTCH_NO=b[1]),c.data.jsonData=PJF.util.json2str(d)),PJF.communication.ajax(c))};
PJF.communication.setEcpJsonParam=function(b,c,d,e,f,g,h,l){var m={},n={},m=PJF.communication.addParam(m);if(f){var q;q=""==d?{}:eval("("+d+")");for(var p=0;p<f.length;p++){var r=f[p];if(q[r]){var u=PJF.communication.client.encryptParam(q[r]);0==u[0]&&(n[r]=u[1])}}}"string"==PJF.util.getType(d)&&""!=d&&(d=eval("("+d+")"));m.ATCH_BTCH_NO&&d&&(d.ATCH_BTCH_NO=m.ATCH_BTCH_NO);m=PJF.apply(m,d);if(PJF.communication.client.isInP2())try{var v=PJF.communication.client.getClientEnv("telclrFlag");v&&"true"==
v[1]&&(m._inte_trl_enable=1)}catch(w){}m=PJF.apply(m,n);d="";PJF.otherInfo&&(PJF.otherInfo.txnList&&-1<PJF.util.array.indexOf(PJF.otherInfo.txnList,c))&&(f=PJF.communication.client.macContent(PJF.util.json2str(m)),0==f[0]&&(d=f[1]));b=e?{adapterId:"ecpJson",_fw_service_id:b,jsonData:PJF.util.json2str(m),transaction_id:c,macData:d}:{_fw_service_id:b,jsonData:PJF.util.json2str(m),transaction_id:c,macData:d};g&&(b._sql_id=g);h&&(b.fmtPrintId=h);l&&(l.docType&&(b.docType=l.docType),l.transFlag&&(b.transFlag=
l.transFlag),l.serverFilePath&&(b.serverFilePath=l.serverFilePath));b.REQ_LANG=CLIENT_LANGUAGE;return b};
PJF.communication.addParam=function(b){if(b){PJF.userInfo&&(b.OPER_CODE=PJF.userInfo.userCode,b.OPER_NAME=PJF.userInfo.userName,b.CCBS_ID=PJF.userInfo.ccbsId);PJF.otherInfo&&(b.TOKEN=PJF.otherInfo.token,b.TERMINAL_MAC=PJF.otherInfo.macAddress,b.TERMINAL_IP=PJF.otherInfo.clientIP,PJF.otherInfo.chaType||(PJF.otherInfo.chaType="0101"),b.TXN_ITT_CHNL_CGY_CODE=PJF.otherInfo.chaType,PJF.otherInfo.logicTerminalNo&&(b.LOGIC_TERMINAL_NO=PJF.otherInfo.logicTerminalNo));PJF.orgInfo&&(b.ORG_SHORT_CNAME=PJF.orgInfo.orgShortCName,
b.ORG_PHYSIC_CLASS=PJF.orgInfo.orgClass,PJF.orgInfo.instLevel1BranchId&&(b.INST_LEVEL1_BRANCH_ID=PJF.orgInfo.instLevel1BranchId),PJF.orgInfo.instSvrlLgPsnID&&(b.REQ_TENANCY_ID=PJF.orgInfo.instSvrlLgPsnID),PJF.orgInfo.instSvrlLgPsnNm&&(b.REQ_TENANCY_NAME=PJF.orgInfo.instSvrlLgPsnNm),PJF.orgInfo.lclCcyCd&&(b.LOC_CCY=PJF.orgInfo.lclCcyCd),PJF.orgInfo.ctyRgonCd&&(b.COUN_CD=PJF.orgInfo.ctyRgonCd),PJF.orgInfo.tmzonCd&&(b.CLIENT_TIMEZONE=PJF.orgInfo.tmzonCd));if(PJF.roleInfo){b.OPER_ROLE=PJF.roleInfo.positionId;
if(PJF.roleInfo.noRepeatRoleAuthInfoList.constructor!==Array){var c=[],d=[],e;for(e in PJF.roleInfo.noRepeatRoleAuthInfoList)0>PJF.util.array.indexOf(d,PJF.roleInfo.noRepeatRoleAuthInfoList[e].pstRlId)&&(d.push(PJF.roleInfo.noRepeatRoleAuthInfoList[e].pstRlId),c.push(PJF.roleInfo.noRepeatRoleAuthInfoList[e]));PJF.roleInfo.noRepeatRoleAuthInfoList=c}b.RL_IDS=PJF.roleInfo.noRepeatRoleAuthInfoList;b.BRANCH_ID=PJF.roleInfo.orgCode}if(c=PJF.html.getUrlParam("menuId"))b._menu_id=c;PJF.communication.client.isInP2()&&
(c=PJF.communication.client.getUniqueNo(),0==c[0]&&(b.ATCH_BTCH_NO=c[1]));return b}};
PJF.communication.getStandardCode=function(b){if(b.categoryId){var c={};c.categoryId=b.categoryId;b.appId&&(c.appId=b.appId);b.clcd&&(c.clcd=b.clcd);b.sorted&&(c.sorted=b.sorted);var d={};d.REQ_LANG=CLIENT_LANGUAGE;d._fw_service_id="fetchStanderdCodeModelListByParams";d.jsonClass="com.ccb.model.StandardDataCategory";d.jsonData=PJF.util.json2str(c);PJF.communication.ajax({data:d,async:b.async,url:"ecpJson2Bean.action",success:b.success})}else alert("PJF.communication.getStandardCode\u9700\u8981\u7684\u53c2\u6570\u4fe1\u606f\u4e0d\u6b63\u786e!\u5f53\u524d\u53c2\u6570\u4e3a:categoryId:"+
b.categoryId+",appId:"+b.appId+",clcd:"+b.clcd)};PJF.communication.getOrgDesc=function(b){b.codes?new PJF.communication.ajax({url:"/bosWeb/ecpJson.action",data:{_fw_service_id:"orgTextService",nodeArr:b.codes},success:b.success,failure:b.failure}):alert("PJF.communication.getOrgDesc\u6ca1\u6709\u4f20\u5165\u673a\u6784\u53f7\u4fe1\u606f!")};
PJF.communication.printData=function(b){var c=b.teminalId,d=b.fileName,e=PJF.util.generateUUid(),c=b.url+"/print/PrintService?IN_teminalId="+c+"&IN_fileName="+d+"&uuid="+e,d=document.createElement("script");d.type="text/javascript";d.src=c;PJF.communication.printData.callback=b.callback;document.body.appendChild(d)};PJF.communication.crossDomainReq=function(b){var c=b.url,c=b.data?PJF.communication.client.sendHttp(c,b.data):PJF.communication.client.sendHttp(c);0==c[0]?b.success(c[1]):b.failure(c[1])};
PJF.communication.getStandardCodeDescByValue=function(b){if(b.categoryId&&b.value){var c={};c.category=b.categoryId;b.appId&&(c.appId=b.appId);b.clcd&&(c.clcd=b.clcd);b.value&&(c.value=b.value);var d={_fw_service_id:"getDataItemByCategoryAndItem",jsonClass:"com.ccb.model.StandardDataCategory"};d.jsonData=PJF.util.json2str(c);PJF.communication.ajax({data:d,async:!1,url:"ecpJson.action",success:b.success})}else alert("\u5fc5\u987b\u8f93\u5165categoryId\u548cvalue")};
PJF.communication.printServiceReq=function(b){if(b.success){b.funId||(b.funId="genPrintString");b.voucherId||(b.voucherId="all");b.jsonData||(b.jsonData={});var c=!1;b.async&&(c=b.async);var d={_fw_service_id:"FormatPrintService"};d.funId=b.funId;d.voucherId=b.voucherId;d.branchId=PJF.userInfo.orgCode;d.jsonData=PJF.util.json2str(b.jsonData);PJF.communication.ajax({data:d,async:c,url:"ecpJson.action",success:b.success})}else alert("PJF.communication.printServiceReq\u9700\u8981\u7684\u53c2\u6570\u4fe1\u606f\u4e0d\u6b63\u786e!")};
PJF.communication.getVoucherPrintContent=function(b){if(!b.success||!b.fmtPrintId||!b.jsonData)alert("PJF.communication.getVoucherPrintContent\u9700\u8981\u7684\u53c2\u6570\u4fe1\u606f\u4e0d\u6b63\u786e!");else{var c=!1;b.async&&(c=b.async);var d={_fw_service_id:"voucherPrintServiceReq"};d.unitedVoucherId=b.fmtPrintId;d.jsonData=PJF.util.json2str(b.jsonData);PJF.communication.ajax({data:d,async:c,url:"ecpJson.action",success:b.success})}};
PJF.communication.getServerTime=function(b){var c=null;PJF.communication.ajax({url:"ecpJson.action",async:!1,data:{_fw_service_id:"getServerTime",timePattern:b?b:"yyyyMMdd"},success:function(b){c=b},failure:function(){new PJF.ui.messageBox({title:"\u5931\u8d25",content:"\u83b7\u53d6\u7cfb\u7edf\u5f53\u524d\u65f6\u95f4\u5931\u8d25"})}});return c?c.currentTime:c};
PJF.communication.file2Swf=function(b){b.convertModel="real";b.convertType="swf";PJF.communication.ajax({url:"/bosWeb/ecpJson.action",data:{_fw_service_id:"file2SwfNew",jsonData:PJF.util.json2str(b)},success:function(b){if("00"==b.TX_STATUS)PJF.html.openWin("/bosWeb/page/swfdemo/viewSwf.html?fileName="+b.FILE_NAME,"pdf\u6587\u4ef6\u6d4f\u89c8");else return new PJF.ui.messageBox({style:"warning",title:"\u63d0\u793a",content:"\u6253\u5f00pdf\u6587\u4ef6"+b.FILE_NAME+"\u5931\u8d25,\u9519\u8bef\u63cf\u8ff0\u4fe1\u606f["+
b.ERROR_MSG+"]!"}),null},failure:function(){new PJF.ui.messageBox({style:"warning",title:"\u63d0\u793a",content:"\u6253\u5f00pdf\u6587\u4ef6\u53d1\u751f\u5f02\u5e38, \u8bf7\u7a0d\u540e\u518d\u8bd5!"});return null}})};
PJF.communication.ootcTemplate=function(b){PJF.communication.ajax({url:"/bosWeb/ecpJsonAsym.action",async:!1,data:{_fw_service_id:"transformData",jsonData:PJF.util.json2str(b)},dataType:"html",success:function(b){var d=b;if("string"==typeof b)try{d=eval("("+b+")")}catch(e){PJF.communication.client.OOTC_CONTENT=b;return}PJF.communication.client.OOTC_CONTENT="";var f=d.BK_DESC;d.FLLW_GUIDE&&(f+="~"+d.FLLW_GUIDE);var g="";b._COMMON&&b._COMMON.SYS_EVT_TRACE_ID&&(g=b._COMMON.SYS_EVT_TRACE_ID);new PJF.ui.errorMessageBox({title:"\u63d0\u793a",
desc:f,code:d.BK_CODE,traceId:g})},failure:function(){new PJF.ui.messageBox({style:"warning",title:"\u63d0\u793a",content:"\u83b7\u53d6\u4e92\u52a8\u7ec8\u7aef\u663e\u793a\u5185\u5bb9\u5931\u8d25"});PJF.communication.client.OOTC_CONTENT=""}})};
PJF.communication.hanyu2PinYin=function(b){b||(b={});var c="";PJF.communication.ajax({url:"ecpJson.action",async:!1,data:{_fw_service_id:"hanyu2PinYin",jsonData:PJF.util.json2str(b)},success:function(b){c=b},failure:function(){new PJF.ui.messageBox({title:"\u5931\u8d25",content:"\u8f6c\u6362\u62fc\u97f3\u5931\u8d25"})}});return c};"undefined"==typeof PJF&&(PJF={communication:{}});
PJF.communication.device={GET_CARDINFO_COMMAND:"getCardInfo",GET_ACCOUNT_PASSWORD:"getAccountPassword",GET_FINGER_INFO:"getFingerInfo",GET_BANK_BOOK_INFO:"getBankBookInfo",WRITE_FINGER_INFO:"writeFingerInfo",WRITE_BANK_BOOK:"writeBankBook",GET_USERINFO_COMMAND:"getUserInfo",PRINT_DOC:"printDoc",PRINT_SCREEN:"printScreen",GET_IDENTITY_CARD_INFO:"getIdentityCardInfo",GET_IC_CARD_INFO:"getIcCardInfo",GET_CONF_VALUE:"getConfValue",GET_FINGER_PORT:"getFingerPort",GET_FINGER_TYPE:"getFingerType",GET_PIC_PATH:"getPicPath",
WRITE_PIC:"writePic",GET_CONF_FILE:"getConfFile",ENCODE:"encode",DECODE:"decode",GET_BP_PORT:"getBpPort",GET_FILE_BYTES:"getFileBytes",ENCRYPT_PARAM:"encryptParam",ENCRYPT_0X88:"encrypt0x88",CALENDER_CUR_DATE:"calendarCurDate",LOG_ERROR:"logError",SET_TAB_TITLE:"setTabTitle",GET_USERINFO:"getUserInfo",GEN_ARQC:"genARQC",GET_TX_DETAIL:"getTxDetail",SEND_ARQC:"sendARQC",TRANSC_DISP_CONFIRM:"transcDispConfirm",SINGLE_QUESTION:"singleQuestion",MULTI_QUESTION:"multiQuestion",GET_SCHEDULE:"getSchedule",
OPEN_NATIVE_WINDOW:"openNativeWindow",OPEN_INNER_WINDOW:"openInnerWindow",GETDEVCONF:"getDevConfig",MAC_CONTENT:"macContent",GET_UNIQUE_NO:"getUniqueNo",OPEN_AUTH_PAGE:"openAuthPage",INVOKE_OTHER_SIDE:"invokeOtherSide",AUTH_PACK_UPLOAD:"authPackUpload",TAB_CLOSE:"tabClose",OPEN_TODOINFO:"openTodoInfo",DO_COMMAND:"doCommonCommand",SEND_HTTP:"sendHttp",GET_MESSAGE_BYNO:"getMessageByKey",GET_CLIENTENV_PROPERTY:"getClientEnv",SET_APP_DATA:"setAppData",GET_APP_DATA:"getAppData",REMOVE_APP_DATA:"removeAppData",
SOFT_PHONE:"softPhone",CLICK_MOUSE:"clickMouse",REGISTER_EVENT:"registerEvent",SEND_EVENT:"sendEvent",RIGHT_PANEL_METHOD:"rightPanelCommand",CHECK_FILE_SIZE:"checkFileSize",CONFIRM_TRANSC_DISP:"confirmTranscDisp",LOAD_DEV_CONFIG:"loadDevConfig",SAVE_DEV_CONFIG:"saveDevConfig",TEST_DEV_CONFIG:"testDevConfig",GET_COMPUTER_INFO:"getComputerInfo",OPEN_FRONT_CONFIG:"openFrontConfig",SET_SELECT:"setSelect",CALCULATE_DATA:"calculateData",PRINT_TEXT:"printUrlText",EXECUTE_JS:"executeJS",WRITE_TRACK:"writeTrack",
GET_TAB_NUM:"getTabNum",LOG_JS:"logJs",LINE_UP_CALL:"lineupCall",CLOSE_WIN:"closeWin",GET_IP_BY_ROUTEID:"getIPByRouteId",UPLOAD_HTTP_REQ:"uploadHttpReq",TAR_PACKAGE:"tarPackage",ENCODE_URL:"encodeUrl",CALL_DEVICE:"callDevice",GET_UC:"getUC",PRINT_VOUCHER:"printVoucher",PRINT_DOWNLOAD_BATCHFILE:"printDownloadBatchFile",PJF_CACHE:"pjfCache",CALL_DEVICE_ASYNC:"callDeviceAsync",ENCRYPT_E2E:"encryptE2E",CR_2_TAB:"Cr2Tab",CAMERA_SHOOT:"cameraShoot",FILE_UTILS:"fileUtils"};PJF.communication.event={};
PJF.communication.pjfHandleEvent=function(b,c){return PJF.communication.event&&PJF.communication.event[c]?PJF.communication.event[c](b):PJF.communication.handleEvent(b)};PJF.communication.beforeSendNSCommandRule={getAccountPassword:function(b,c){"1.2.6">c&&4<=b.length&&(b=b.slice(0,3));return b},registerEvent:function(b,c){"1.2.6.3"<=c&&3==b.length&&(PJF.communication.event[b[1]]=b[2]);return b}};
PJF.communication.client=function(){var b=function(b){return function(){if(PJF.constants&&PJF.constants.IS_BSLOGIN_MODEL)return alert("\u60a8\u5f53\u524d\u5904\u4e8e\u6d4f\u89c8\u5668\u767b\u5f55\u6a21\u5f0f\uff0c\u65e0\u6cd5\u8c03\u7528\u5916\u8bbe\uff0c\u8bf7\u5728\u5ba2\u6237\u7aef\u4e2d\u4f7f\u7528\u76f8\u5e94\u529f\u80fd"),[0,"","","","","","","","","","","",""];for(var c=[b],d=0;d<arguments.length;d++)c=c.concat(arguments[d]);PJF.communication.beforeSendNSCommandRule[c[0]]&&(d=PJF.util.getClientVersion(),
c=PJF.communication.beforeSendNSCommandRule[c[0]](c,d));return sendNSCommand.apply(this,c)}},c={p2AfterLoadCallBack:function(b,c,d,e){try{b=b.replace(RegExp("\n","gm"),"\\n");c=c.replace(RegExp("\n","gm"),"\\n");d=d.replace(RegExp("\n","gm"),"\\n");PJF.userInfo=eval("("+b+")");PJF.orgInfo=eval("("+c+")");if(PJF.orgInfo.adivCd&&5<PJF.orgInfo.adivCd.length){PJF.orgInfo.levOne_code=PJF.orgInfo.adivCd.substring(0,2)+"0000";var m=PJF.orgInfo.levOne_code;PJF.orgInfo.levTwo_code=m==""+PJF.constants.AREA_BEIJING||
m==""+PJF.constants.AREA_TIANJING||m==""+PJF.constants.AREA_SHANGHAI||m==""+PJF.constants.AREA_CHONGQING?m:PJF.orgInfo.adivCd.substring(0,4)+"00"}PJF.roleInfo=eval("("+d+")");e&&(e=e.replace(RegExp("\n","gm"),"\\n"),PJF.otherInfo=eval("("+e+")"))}catch(n){alert(n)}},getUserInfo:function(){if(PJF.userInfo)return PJF.userInfo;alert("\u65e0\u6cd5\u5f97\u5230\u7528\u6237\u4fe1\u606f\uff0c\u8bf7\u68c0\u67e5js\u662f\u5426\u6267\u884c\u6b63\u786e!")},customKeyboard:function(){document.onkeydown=function(){"submit"!=
event.srcElement.type&&("image"!=event.srcElement.type&&"textarea"!=event.srcElement.type&&13==event.keyCode)&&(event.keyCode=50)}},isInP2:function(){return"undefined"!=typeof sendNSCommand}},d;for(d in PJF.communication.device){var e=PJF.communication.device[d];c[e]=b(e)}return c}();
PJF.communication.client.checkVerifyCode=function(b,c){if(!b||null==b||""==b)new PJF.ui.messageBox({style:"warning",title:"\u6d88\u606f",content:"\u9a8c\u8bc1\u7801\u4e0d\u80fd\u4e3a\u7a7a"});else{var d={bizArgs:{}},e=PJF.communication.client.getDevConfig("dev_telclr");d.devKindId="true"==eval("("+e+")").dev_pin?"dev_telclr":"dev_pin";d.interfaceId="readPin";d.funcId="checkVerifyCode";d.verifyCode=b;d.bizArgs.iTimes="1";c&&(d.bizArgs.strTimeout=c);return PJF.communication.client.callDevice(PJF.util.json2str(d))}};
PJF.communication.client.serviceEvaluate=function(b,c,d,e){if(3>arguments.length)new PJF.ui.messageBox({style:"warning",title:"\u6d88\u606f",content:"\u4f20\u5165\u53c2\u6570\u4e0d\u6b63\u786e"});else{var f={bizArgs:{},devKindId:"dev_telclr",interfaceId:"serviceEvaluate"};f.bizArgs.strOperData=b;f.bizArgs.strDispData=c;f.bizArgs.strItem=d;f.bizArgs.strVoiceNo="10";f.bizArgs.strDispTimeout="10";f.bizArgs.strTimeout=e;f=PJF.communication.client.callDevice(PJF.util.json2str(f));"0"==f[0]&&(f[1]=f[2]);
return f}};PJF.communication.client.inputNumber=function(b,c,d,e){var f={bizArgs:{},devKindId:"dev_telclr",interfaceId:"inputNumber"};b&&(f.bizArgs.iStyle=b);c&&(f.bizArgs.iLength=c);d&&(f.bizArgs.iControlType=d);e&&(f.bizArgs.strVoiceNo=e);b=PJF.communication.client.callDevice(PJF.util.json2str(f));"0"==b[0]&&(b[1]=b[2]);return b};
PJF.communication.client.readCISN=function(b){if("0"!=b&&"1"!=b)new PJF.ui.messageBox({style:"warning",title:"\u6d88\u606f",content:"\u6b65\u53f7\u53ea\u80fd\u4e3a0\u62161"});else{var c={bizArgs:{},devKindId:"dev_mmq",interfaceId:"readCISN"};c.bizArgs.nStep=b;b=PJF.communication.client.callDevice(PJF.util.json2str(c));"0"==b[0]&&(b[1]=b[2]);return b}};
PJF.communication.client.generateKeyPair=function(b,c){if(2>arguments.length)new PJF.ui.messageBox({style:"warning",title:"\u6d88\u606f",content:"\u4f20\u5165\u53c2\u6570\u4e0d\u6b63\u786e"});else{var d={bizArgs:{},devKindId:"dev_mmq",interfaceId:"generateKeyPair"};d.bizArgs.nStep=c;d.bizArgs.strAcc=b;d=PJF.communication.client.callDevice(PJF.util.json2str(d));"0"==d[0]&&(d[1]=d[2],d[2]=d[3]);return d}};
PJF.communication.client.downLoadAK=function(b,c,d,e){if(4>arguments.length)new PJF.ui.messageBox({style:"warning",title:"\u6d88\u606f",content:"\u4f20\u5165\u53c2\u6570\u4e0d\u6b63\u786e"});else{var f={bizArgs:{},devKindId:"dev_mmq",interfaceId:"downLoadAK"};f.bizArgs.nStep=e;f.bizArgs.strAcc=b;f.bizArgs.strACCKey=c;f.bizArgs.strAK=d;return PJF.communication.client.callDevice(PJF.util.json2str(f))}};
PJF.communication.client.delAcc=function(b,c){if(2>arguments.length)new PJF.ui.messageBox({style:"warning",title:"\u6d88\u606f",content:"\u4f20\u5165\u53c2\u6570\u4e0d\u6b63\u786e"});else{var d={bizArgs:{},devKindId:"dev_mmq",interfaceId:"delAcc"};d.bizArgs.nStep=c;d.bizArgs.strAcc=b;return PJF.communication.client.callDevice(PJF.util.json2str(d))}};
PJF.communication.client.addMachineSign=function(b,c,d,e){if(4>arguments.length)new PJF.ui.messageBox({style:"warning",title:"\u6d88\u606f",content:"\u4f20\u5165\u53c2\u6570\u4e0d\u6b63\u786e"});else{var f={bizArgs:{},devKindId:"dev_mmq",interfaceId:"addMachineSign"};f.bizArgs.strAcc=b;f.bizArgs.strNewChipID=c;f.bizArgs.strNewVK=d;f.bizArgs.nStep=e;f=PJF.communication.client.callDevice(PJF.util.json2str(f));"0"==f[0]&&(f[1]=f[2]);return f}};
PJF.communication.client.unlockCI=function(b,c){if(2>arguments.length)new PJF.ui.messageBox({style:"warning",title:"\u6d88\u606f",content:"\u4f20\u5165\u53c2\u6570\u4e0d\u6b63\u786e"});else{var d={bizArgs:{},devKindId:"dev_mmq",interfaceId:"unlockCI"};d.bizArgs.nStep=c;d.bizArgs.strUnlockCode=b;return PJF.communication.client.callDevice(PJF.util.json2str(d))}};
PJF.communication.client.issueCI=function(b,c){if(2>arguments.length)new PJF.ui.messageBox({style:"warning",title:"\u6d88\u606f",content:"\u4f20\u5165\u53c2\u6570\u4e0d\u6b63\u786e"});else{var d={bizArgs:{},devKindId:"dev_mmq",interfaceId:"issueCI"};d.bizArgs.nStep=c;d.bizArgs.strUnlockCode=b;return PJF.communication.client.callDevice(PJF.util.json2str(d))}};
PJF.communication.client.getCheckCode=function(b,c){if(!b||null==b||""==b)new PJF.ui.messageBox({style:"warning",title:"\u6d88\u606f",content:"\u7b97\u6821\u9a8c\u7801\u7684\u6570\u636e\u4e0d\u80fd\u4e3a\u7a7a"});else if(!c||null==c||""==c)new PJF.ui.messageBox({style:"warning",title:"\u6d88\u606f",content:"\u6570\u636e\u957f\u5ea6\u4e0d\u80fd\u4e3a\u7a7a"});else{var d={bizArgs:{},devKindId:"dev_mmq",interfaceId:"getCheckCode"};d.bizArgs.strContent=b;d.bizArgs.iLen=c;return PJF.communication.client.callDevice(PJF.util.json2str(d))}};
PJF.communication.client.scan=function(){return PJF.communication.client.callDevice(PJF.util.json2str({devKindId:"dev_scanner",interfaceId:"scanWithParams",bizArgs:{showUI:"false",params:{imagePath:"D:\\CCB\\ECP\\Temp"}}}))};PJF.communication.client.getscanners=function(){return PJF.communication.client.callDevice(PJF.util.json2str({devKindId:"dev_scanner",interfaceId:"getAvailableDataSources",bizArgs:{}}))};
PJF.communication.client.deleteFile=function(b,c){var d={devKindId:"dev_scanner",interfaceId:"deleteFile"};d.bizArgs={nFlag:b,strFileName:c};return PJF.communication.client.callDevice(PJF.util.json2str(d))};PJF.communication.client.rotate=function(b,c){var d={devKindId:"dev_scanner",interfaceId:"rotate"};d.bizArgs={strFileName:b,dAngle:c};return PJF.communication.client.callDevice(PJF.util.json2str(d))};
PJF.communication.client.zoom=function(b,c,d){var e={devKindId:"dev_scanner",interfaceId:"zoom"};e.bizArgs={strFileName:b,nWidth:c,nHeight:d};return PJF.communication.client.callDevice(PJF.util.json2str(e))};PJF.communication.client.copyFile=function(b,c){var d={devKindId:"dev_scanner",interfaceId:"copyFile"};d.bizArgs={strSrcFileName:b,strDstFileName:c};return PJF.communication.client.callDevice(PJF.util.json2str(d))};
PJF.communication.client.renameFile=function(b,c){var d={devKindId:"dev_scanner",interfaceId:"renameFile"};d.bizArgs={strSrcFileName:b,strDstFileName:c};return PJF.communication.client.callDevice(PJF.util.json2str(d))};PJF.communication.client.showUI=function(){return PJF.communication.client.callDevice(PJF.util.json2str({devKindId:"dev_scanner",interfaceId:"showUI"}))};
PJF.communication.client.serviceEvaluateAsync=function(b,c,d,e,f,g){if(6>arguments.length)new PJF.ui.messageBox({style:"warning",title:"\u6d88\u606f",content:"\u4f20\u5165\u53c2\u6570\u4e0d\u6b63\u786e"});else{var h={bizArgs:{},devKindId:"dev_telclr",interfaceId:"serviceEvaluate"};h.bizArgs.strOperData=b;h.bizArgs.strDispData=c;h.bizArgs.strItem=d;h.bizArgs.strVoiceNo="10";h.bizArgs.strDispTimeout="10";h.bizArgs.strTimeout=e;PJF.communication.client.callDeviceAsync(g,f,PJF.util.json2str(h))}};
PJF.communication.client.scan=function(){return PJF.communication.client.callDevice(PJF.util.json2str({devKindId:"dev_scanner",interfaceId:"scanWithParams",bizArgs:{showUI:"false",params:{imagePath:"D:\\CCB\\ECP\\Temp",ICAP_IMAGEFILEFORMAT:"ICAP_IMAGEFILEFORMAT"}}}))};PJF.communication.client.getscanners=function(){return PJF.communication.client.callDevice(PJF.util.json2str({devKindId:"dev_scanner",interfaceId:"getAvailableDataSources",bizArgs:{}}))};
PJF.communication.client.deleteFile=function(b,c){var d={devKindId:"dev_scanner",interfaceId:"deleteFile"};d.bizArgs={nFlag:b,strFileName:c};return PJF.communication.client.callDevice(PJF.util.json2str(d))};PJF.communication.client.rotate=function(b,c){var d={devKindId:"dev_scanner",interfaceId:"rotate"};d.bizArgs={strFileName:b,dAngle:c};return PJF.communication.client.callDevice(PJF.util.json2str(d))};
PJF.communication.client.zoom=function(b,c,d){var e={devKindId:"dev_scanner",interfaceId:"zoom"};e.bizArgs={strFileName:b,nWidth:c,nHeight:d};return PJF.communication.client.callDevice(PJF.util.json2str(e))};PJF.communication.client.copyFile=function(b,c){var d={devKindId:"dev_scanner",interfaceId:"copyFile"};d.bizArgs={strSrcFileName:b,strDstFileName:c};return PJF.communication.client.callDevice(PJF.util.json2str(d))};
PJF.communication.client.renameFile=function(b,c){var d={devKindId:"dev_scanner",interfaceId:"renameFile"};d.bizArgs={strSrcFileName:b,strDstFileName:c};return PJF.communication.client.callDevice(PJF.util.json2str(d))};PJF.communication.client.showUI=function(){return PJF.communication.client.callDevice(PJF.util.json2str({devKindId:"dev_scanner",interfaceId:"showUI"}))};
PJF.communication.client.getSecTrackData=function(){var b={bizArgs:{}},c=PJF.communication.client.getDevConfig("dev_iccard");b.devKindId="true"==eval("("+c+")").dev_rdcard?"dev_iccard":"dev_rdcard";b.interfaceId="getBookAcct";return PJF.communication.client.callDevice(PJF.util.json2str(b))};
PJF.communication.client.getICCardData=function(){var b={bizArgs:{},devKindId:"dev_iccard",interfaceId:"getICCardInfo"};b.bizArgs.iIcFlag="3";b.bizArgs.aryTagList="x41,x42,x43,x44,x45,x46,x47,x48,x49,x4a";b.bizArgs.strAIDList="A000000333010101|A000000333010102|A000000333010103|A000000333010106";b=PJF.communication.client.callDevice(PJF.util.json2str(b));if("0"==b[0]){var c={},d={},e=b[3],f=e.length;if(4>f)return["DEV9999999","\u8bfbIC\u5361\u4fe1\u606f\u8fd4\u56de\u503c\u6709\u9519"];var g=0;try{for(;g<
f;){var h=e.substring(g+1,g+4),l=Number(h),m=e.substring(g+4,g+4+l),n=e.substring(g,g+1);d[n]=m;g=g+4+l}}catch(q){return["DEV9999999","\u8bfbIC\u5361\u4fe1\u606f\u8fd4\u56de\u503c\u6709\u9519"]}c.ICCardType=b[2];c.accountNo=d.A;c.userName=d.B;c.cardType=d.C;c.cardNo=d.D;c.secDisInfo=d.E;c.firDisInfo=d.F;c.balance=d.G;c.balanceLimit=d.H;c.validTime=d.I;c.ICcardNo=d.J;return["0",c]}return b};
PJF.communication.client.validateCode=function(b,c){var d=[];if(!b||null==b||""==b)return d[0]="1",d[1]="\u9a8c\u8bc1\u7801\u4e0d\u80fd\u4e3a\u7a7a",d;var e=PJF.communication.client.getDevConfig("dev_telclr"),f={bizArgs:{},devKindId:"dev_telclr"};"false"==eval("("+e+")").validate?(f.interfaceId="readPin",f.bizArgs.iTimes="1",f.bizArgs.iLength="6"):(f.interfaceId="inputNumber",f.bizArgs.iStyle="0",f.bizArgs.iLength="6",f.bizArgs.iControlType="1",f.bizArgs.strVoiceNo="11");c&&(f.bizArgs.strTimeout=
c);e=PJF.communication.client.callDevice(PJF.util.json2str(f));"0"==e[0]?e[2]==b?(d[0]="0",d[1]="true"):(d[0]="1",d[1]="\u9a8c\u8bc1\u7801\u8f93\u5165\u9519\u8bef"):d=e;return d};PJF.communication.client.getCardRdWrtCap=function(){var b=PJF.communication.client.getDevConfig("dev_iccard");return!eval("("+b+")").devTypeId?["0","2"]:PJF.communication.client.callDevice(PJF.util.json2str({bizArgs:{},devKindId:"dev_iccard",interfaceId:"getCardRdWrtCap"}))};
PJF.communication.client.printVoucher=function(b){var c={bizArgs:{},devKindId:"dev_voucherprt",interfaceId:"printVoucher"};c.bizArgs.jsonStr=b;return PJF.communication.client.callDevice(PJF.util.json2str(c))};PJF.communication.client.printTxt2DimCode=function(b,c,d){var e={bizArgs:{},devKindId:"dev_dimprt",interfaceId:"printTxt2DimCode"};e.bizArgs.strArryTxtInfo=b;e.bizArgs.nTxtInfoCnt=c;e.bizArgs.dimCodeInfo=d;return PJF.communication.client.callDevice(PJF.util.json2str(e))};PJF.namespace("PJF.ui");PJF.ui.component=function(b){if(this.validateParam(b)){var c=!0;"undefined"!=typeof b.accessControl&&(c=eval(b.accessControl));c?(this.params=b,this.id=b.id,"string"==typeof b?this.com=$("#"+b):"string"==typeof b.dom&&(this.com=$("#"+b.dom)),this.id||(this.id=this.generateId()),this.com&&(this.com.attr("componentId",this.id),this.com.attr("componentType",this.getClassName())),(new Date).getTime(),this.init(b),PJF.ui.componentMgr.reg(this)):$("#"+b.dom).hide()}};
PJF.apply(PJF.ui.component.prototype,{init:function(){},getId:function(){return this.id},validateParam:function(){return!0},show:function(){this.com.show()},hide:function(){this.com.hide()},destroy:function(){this.com.remove();PJF.ui.componentMgr.remove(this.id);this.id=this.params=this.com=null},generateId:function(){for(var b="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),c=Array(36),d=0,e,f=0;36>f;f++)8==f||13==f||18==f||23==f?c[f]="-":14==f?c[f]="4":(2>=d&&(d=33554432+
16777216*Math.random()|0),e=d&15,d>>=4,c[f]=b[19==f?e&3|8:e]);return c.join("").replace(/-/g,"")},focus:function(){this.com.focus()},getClassName:function(){return"PJF.ui.component"},focusable:function(){return!1},display:function(b){b?this.com.show():this.com.hide()}});PJF.ui.componentMgr=function(){var b=new PJF.util.Collection;return{get:function(c){return b.item(c)},reg:function(c){b.containsKey(c.getId())&&console.log(resource.REG_EXIST_ID_INFO+c.getId()+resource.REG_EXIST_ID_INFO1);b.add(c.getId(),c)},remove:function(c){b.removeKey(c)},clear:function(){b.clear()}}}();PJF.ui.areaSelector=PJF.extend(PJF.ui.component,{storageData:{},init:function(b){this.options={dom:null,id:null,label:null,provinceInputId:this.generateId(),cityInputId:this.generateId(),countyInputId:this.generateId(),provinceName:null,provinceDefault:null,provinceId:this.generateId(),cityDefault:null,countyDefault:null,label:null,cityName:null,isMouseleave:!1,appId:null,timeoutId:null,clcd:null,provinceChange:null,cityChange:null,label:null,countyChange:null,cityId:this.generateId(),countyName:null,
countyId:this.generateId(),detail:null,detaileId:this.generateId(),detailName:null,containerId1:this.generateId(),containerId2:this.generateId(),containerId3:this.generateId(),divId1:this.generateId(),divId2:this.generateId(),divId3:this.generateId(),nullOption:!1,timeoutId:null,clickInputId:null};var c=this;$.extend(this.options,b);if(!$("#"+this.options.provinceId).is("select")){b="";this.options.label&&(b+='<label class="pjf_label">'+this.options.label+"\uff1a</label>");b+='<input readonly="readonly"   id="'+
this.options.provinceInputId+'" class="area_ytd_input"/><select style="display:none"  id="'+this.options.provinceId+'" name="'+this.options.provinceName+'"></select>';this.options.cityName&&(b+='<input readonly="readonly" style="margin-left:10px" class="area_ytd_input" id="'+this.options.cityInputId+'"/><select style="display:none" id="'+this.options.cityId+'"  name="'+this.options.cityName+'" ></select>');this.options.countyName&&(b+='<input readonly="readonly" style="margin-left:10px" id="'+this.options.countyInputId+
'" class="area_ytd_input"/><select style="display:none"  id="'+this.options.countyId+'"  name="'+this.options.countyName+'" ></select>');$("#"+this.options.dom).append(b);var d="",e=function(b){console.log("==============fnSuccess3--success--\u53bf======================");c.com.find(".area_ytd_error").remove();$("#"+c.options.countyId).append(c.formatter(b))},f=function(){console.log("==============fnFailure3--error--\u53bf======================");c.com.find(".area_ytd_error").remove();c.com.append("<span class='area_ytd_error'>\u53bf\u7684\u6570\u636e\u52a0\u8f7d\u5931\u8d25!</span>")},
g=function(b){console.log("==============fnSuccess2--success--\u5e02======================");c.com.find(".area_ytd_error").remove();if(c.options.countyName)if(d!=PJF.constants.AREA_BEIJING||d!=PJF.constants.AREA_TIANJING||d!=PJF.constants.AREA_SHANGHAI||d!=PJF.constants.AREA_CHONGQING)$("#"+c.options.cityId).append(c.formatter(b)),c.sendRequest(b[0].name,e,f);else{$("#"+c.options.cityId).find("option").remove();var g=$("#"+c.options.provinceId).find("option[value="+d+"]").text();$("#"+c.options.cityId).append("<optoin value='"+
d+"'>"+g+"</option>");$("#"+c.options.countyId).append(c.formatter(b))}else d!=PJF.constants.AREA_BEIJING&&d!=PJF.constants.AREA_TIANJING&&d!=PJF.constants.AREA_SHANGHAI&&d!=PJF.constants.AREA_CHONGQING?$("#"+c.options.cityId).append(c.formatter(b)):($("#"+c.options.cityId).find("option").remove(),g=$("#"+c.options.provinceId).find("option[value="+d+"]").text(),$("#"+c.options.cityId).append("<optoin value='"+d+"'>"+g+"</option>"),$("#"+c.options.countyId).append(c.formatter(b)))},h=function(){console.log("==============fnFailure2--error--\u5e02======================");
c.com.find(".area_ytd_error").remove();c.com.append("<span class='area_ytd_error'>\u5e02\u7684\u6570\u636e\u52a0\u8f7d\u5931\u8d25!</span>")};c.sendRequest("101573",function(b){console.log("==============fnSuccess1--success--\u7701======================");c.com.find(".area_ytd_error").remove();$("#"+c.options.provinceId).find("option").remove();$("#"+c.options.provinceId).append(c.formatter(b));c.options.cityName&&($("#"+c.options.cityId).find("option").remove(),d=b[0].name,c.sendRequest(d,g,h))},
function(){console.log("==============fnFailure1--error--\u7701======================");c.com.find(".area_ytd_error").remove();c.com.append("<span class='area_ytd_error'>\u7701\u7684\u6570\u636e\u52a0\u8f7d\u5931\u8d25!</span>")})}c.options.nullOption?($("#"+c.options.provinceId).find("option:selected").removeAttr("selected"),$("#"+c.options.provinceId).prepend("<option value=''>"+resource.AREA_NULL_LABEL+"</option>"),$("#"+c.options.provinceInputId).val(resource.AREA_NULL_LABEL),$("#"+c.options.provinceId).val("")):
$("#"+c.options.provinceInputId).val($("#"+c.options.provinceId).find("option:selected").text());c.options.cityName&&(c.options.nullOption&&($("#"+c.options.cityId).prepend("<option value=''>"+resource.AREA_NULL_LABEL+"</option>"),$("#"+c.options.cityInputId).val(resource.AREA_NULL_LABEL)),$("#"+c.options.provinceId).change(function(){console.log("=====================change--\u7701=========================");var b=$(this).val();if(null!=b&&""!=b){$("#"+c.options.cityId).find("option").remove();$("#"+
c.options.cityInputId).val("");$("#"+c.options.countyInputId).val("");var d=function(b){console.log("==============fnSuccess5--success--\u53bf======================");c.com.find(".area_ytd_error").remove();!c.options.nullOption&&0<b.length&&($("#"+c.options.countyId).append(c.formatter(b)),$("#"+c.options.countyInputId).val(b[0].desc))},e=function(){console.log("==============fnFailure5--error--\u53bf======================");c.com.find(".area_ytd_error").remove();c.com.append("<span class='area_ytd_error'>\u53bf\u7684\u6570\u636e\u52a0\u8f7d\u5931\u8d25!</span>")};
c.sendRequest(b,function(f){console.log("==============fnSuccess4--success--\u5e02======================");c.com.find(".area_ytd_error").remove();$("#"+c.options.cityId).find("option").remove();c.options.nullOption&&($("#"+c.options.cityId).append("<option value=''>"+resource.AREA_NULL_LABEL+"</option>"),$("#"+c.options.cityInputId).val(resource.AREA_NULL_LABEL));if(c.options.countyName)if($("#"+c.options.countyId).find("option").remove(),c.options.nullOption&&($("#"+c.options.countyId).append("<option value=''>"+
resource.AREA_NULL_LABEL+"</option>"),$("#"+c.options.countyInputId).val(resource.AREA_NULL_LABEL)),b==PJF.constants.AREA_BEIJING||b==PJF.constants.AREA_TIANJING||b==PJF.constants.AREA_SHANGHAI||b==PJF.constants.AREA_CHONGQING){var g=$("#"+c.options.provinceId).find("option:selected").text();$("#"+c.options.cityId).append("<option value='"+b+"'>"+g+"</option>");c.options.nullOption||($("#"+c.options.cityInputId).val(g),$("#"+c.options.countyId).append(c.formatter(f)));$("#"+c.options.countyInputId).val($("#"+
c.options.countyId).find("option:selected").text())}else $("#"+c.options.cityId).append(c.formatter(f)),!c.options.nullOption&&0<f.length&&$("#"+c.options.cityInputId).val(f[0].desc),(f=$("#"+c.options.cityId).val())&&c.sendRequest(f,d,e);else b!=PJF.constants.AREA_BEIJING&&b!=PJF.constants.AREA_TIANJING&&b!=PJF.constants.AREA_SHANGHAI&&b!=PJF.constants.AREA_CHONGQING?($("#"+c.options.cityId).append(c.formatter(f)),!c.options.nullOption&&0<f.length&&$("#"+c.options.cityInputId).val(f[0].desc)):(g=
$("#"+c.options.provinceId).find("option:selected").text(),$("#"+c.options.cityId).append("<option value='"+b+"'>"+g+"</option>"),$("#"+c.options.cityInputId).val(g),c.options.nullOption&&($("#"+c.options.cityId).find("option:selected").removeAttr("selected"),$("#"+c.options.cityInputId).val(resource.AREA_NULL_LABEL)))},function(){console.log("==============fnFailure2--error--\u5e02======================");c.com.find(".area_ytd_error").remove();c.com.append("<span class='area_ytd_error'>\u5e02\u7684\u6570\u636e\u52a0\u8f7d\u5931\u8d25!</span>")})}else $("#"+
c.options.cityId).children().remove(),$("#"+c.options.cityInputId).val(""),c.options.countyName&&($("#"+c.options.countyId).children().remove(),$("#"+c.options.countyInputId).val(""))}));c.options.countyName&&(c.options.nullOption&&($("#"+c.options.countyId).prepend("<option value=''>"+resource.AREA_NULL_LABEL+"</option>"),$("#"+c.options.countyInputId).val(resource.AREA_NULL_LABEL)),$("#"+c.options.cityId).change(function(){console.log("=====================change--\u5e02=========================");
var b=$(this).val();null!=b&&""!=b?($("#"+c.options.countyId).find("option").remove(),$("#"+c.options.countyInputId).val(""),c.options.nullOption&&($("#"+c.options.countyId).prepend("<option value=''>"+resource.AREA_NULL_LABEL+"</option>"),$("#"+c.options.countyInputId).val(resource.AREA_NULL_LABEL)),c.sendRequest(b,function(b){console.log("==============fnSuccess6--success--\u53bf======================");c.com.find(".area_ytd_error").remove();$("#"+c.options.countyId).append(c.formatter(b));!c.options.nullOption&&
(0<b.length&&$.isArray(b))&&$("#"+c.options.countyInputId).val(b[0].desc)},function(){console.log("==============fnFailure6--error--\u53bf======================");c.com.find(".area_ytd_error").remove();c.com.append("<span class='area_ytd_error'>\u53bf\u7684\u6570\u636e\u52a0\u8f7d\u5931\u8d25!</span>")})):($("#"+c.options.countyId).find("option").remove(),$("#"+c.options.countyInputId).val(""))}));this.options.provinceDefault&&($("#"+c.options.provinceId).val(c.options.provinceDefault),$("#"+c.options.provinceInputId).val($("#"+
c.options.provinceId).find("option:selected").text()),$("#"+c.options.provinceId).trigger("change"));this.options.cityDefault&&($("#"+c.options.cityId).val(this.options.cityDefault),$("#"+c.options.cityInputId).val($("#"+this.options.cityId).find("option:selected").text()),$("#"+c.options.cityId).trigger("change"));this.options.countyDefault&&($("#"+this.options.countyId).val(this.options.countyDefault),$("#"+this.options.countyInputId).val($("#"+this.options.countyId).find("option:selected").text()));
$("#"+this.options.provinceInputId).unbind("areaSelector_pro_click").bind("click.areaSelector_pro_click",function(){c.options.clickInputId=c.options.provinceInputId;c.addDiv(c.options.provinceId,c.options.provinceInputId,c.options.containerId1,"province")});c.options.cityName&&$("#"+this.options.cityInputId).unbind("areaSelector_city_click").bind("click.areaSelector_city_click",function(){c.options.clickInputId=c.options.cityInputId;c.addDiv(c.options.cityId,c.options.cityInputId,c.options.containerId2,
"city")});c.options.countyName&&$("#"+this.options.countyInputId).unbind("areaSelector_county_click").bind("click.areaSelector_county_click",function(){c.options.clickInputId=c.options.countyInputId;c.addDiv(c.options.countyId,c.options.countyInputId,c.options.containerId3,"county")})},sendRequest:function(b,c,d){var e=this,f=this.storageData;b in f?(c instanceof Function&&c(f[b]),null!=e.options.clickInputId&&0<$(".area_ctrlarea").length&&$("#"+e.options.clickInputId).trigger("click")):PJF.communication.ajax({url:"ecpJson?_fw_service_id=getCitys&inData={}&provinceCode="+
b,type:"get",dataType:"json",async:!1,success:function(d){f[b]=d;c instanceof Function&&c(d);null!=e.options.clickInputId&&0<$(".area_ctrlarea").length&&$("#"+e.options.clickInputId).trigger("click")},failure:function(){d instanceof Function&&d();null!=e.options.clickInputId&&0<$(".area_ctrlarea").length&&$("#"+e.options.clickInputId).trigger("click")}})},hideDiv:function(){$(".area_ctrlarea").remove()},addDiv:function(b,c,d,e){var f=this,g=$("#"+c).offset(),h=$("#"+c).attr("disabled"),l=$("#"+c).hasClass("pjf_readonly_input");
if(!h&&!l){$("#"+d).remove();$(".area_ctrlarea").remove();var m="<div id="+d+" class='area_ctrlarea'><div class='area_negative'><ul class='area_div'>",n=0;$("#"+b).find("option").each(function(b){var c=$(this).attr("value"),d=$(this).text();$(this).attr("selected")?(m+="<li value='"+c+"' class='areaSelected'",n=b,3<d.length&&(b=Math.ceil(130/d.length),m+=" style='font-size:"+b+"px'")):m+="<li value='"+c+"'";3<d.length&&(b=Math.ceil(130/d.length),24>b&&(m+=" style='font-size:"+b+"px'"));m+=">"+d+"</li>"});
m+="</ul><div class='area_overlayer'></div></div></div>";$(m).appendTo("body");$("#"+d).offset({top:g.top+$("#"+c).innerHeight()+2,left:g.left});$(".area_div").css("top",50*(2-n));var q,p,r,u;$(".area_overlayer").bind("mousedown",function(g){function h(d){function g(){0!=t%50&&(m=0<t%50&&25>t%50?t-t%50:0>t%50&&50>Math.abs(t%50)&&25<Math.abs(t%50)?t+(Math.abs(t%50)-50):0>t%50&&25>=Math.abs(t%50)?t+Math.abs(t%50):t+50-t%50,l.css({top:m}));$(".area_negative").find("ul").each(function(){var d=$(this),
g=d.find("li").removeClass("areaSelected"),d=parseInt(d.css("top")),h=parseInt((100-d)/50);25<(100-d)%50&&(h+=1);var g=$(g[h]),l=g.attr("value"),d=g.text();g.addClass("areaSelected");$("#"+c).val(d);3<d.length?(d=Math.ceil(130/d.length),g.attr("style","font-size:"+d+"px")):g.attr("style","font-size:36px");$("#"+b).find("option:selected").removeAttr("selected");$("#"+b).find("option").each(function(){$(this).val()==l&&$(this).attr("selected","selected")});"province"==e&&f.options.provinceChange&&f.options.provinceChange();
"city"==e&&f.options.cityChange&&f.options.cityChange();"county"==e&&f.options.countyChange&&f.options.countyChange()})}d.unbind("mousemove");d.unbind("mouseout");d.unbind("mouseup");p=new Date;var l=$(".area_div");u=d=parseInt(l.css("top"));var m,n=(u-r)/(p-q),s=3*n*n/0.012,v=n/6,t=d;0.4<Math.abs(n)?(0<v?t=d+s:(v=-v,t=d-s),t-150<0-l.height()?t=150-l.height():100<t&&(t=100),l.css("transition","top "+v+"s ease"),l.css("top",t),l.bind("transitionend",function(){l.unbind("transitionend");l.css("transition",
"all 0.3s ease");g();l.css("transition","top 0 ease")})):g()}clearTimeout(f.options.timeoutId);f.options.timeoutId=void 0;g.preventDefault();var l=$(".area_div"),m,n=g.pageY-$(this).offset().top;q=new Date;m=parseInt(l.css("top"));l.find(".areaSelected").removeClass("areaSelected");l.find("li").each(function(){var b=$(this),c=b.text();3<c.length?(c=Math.ceil(130/c.length),24>c?b.attr("style","font-size:"+c+"px"):b.attr("style","font-size:24px")):b.attr("style","font-size:24px")});r=m;$(this).bind("mousemove",
function(b){b.preventDefault();b.offsetY=b.pageY-$(this).offset().top;b=m+b.offsetY-n;if(b-150<0-l.height()||100<b)return!1;l.css("top",b);return!1}).bind("mouseup",function(){h($(this));f.options.timeoutId=setTimeout(function(){$.when(function(){var b=$.Deferred();$("#"+d).remove();setTimeout(function(){b.resolve()},0);return b.promise()}()).done(function(){$("#"+b).trigger("change")})},1E3)}).bind("mouseout",function(){h($(this))})});$(".area_overlayer").unbind("mouseleave").bind("mouseleave",function(){void 0===
f.options.timeoutId&&(f.options.timeoutId=setTimeout(function(){$.when(function(){var b=$.Deferred();$("#"+d).remove();setTimeout(function(){b.resolve()},0);return b.promise()}()).done(function(){$("#"+b).trigger("change")})},1E3))})}},formatter:function(b){for(var c="",d=0;d<b.length;d++)c+="<option value='"+b[d].name+"'>"+b[d].desc+"</option>";return c},formatter1:function(b){for(var c="",d=0;d<b.length;d++)c+="<option value='"+b[d].itemValue+"'>"+b[d].itemName+"</option>";return c},getProvinceText:function(){return $("#"+
this.options.provinceId).find("option:selected").text()},disable:function(){$("#"+this.options.provinceInputId).attr("disabled","disabled").addClass("pjf_disabled_input");$("#"+this.options.cityInputId).attr("disabled","disabled").addClass("pjf_disabled_input");$("#"+this.options.countyInputId).attr("disabled","disabled").addClass("pjf_disabled_input")},enable:function(){$("#"+this.options.provinceInputId).removeAttr("disabled","disabled").removeClass("pjf_disabled_input");$("#"+this.options.cityInputId).removeAttr("disabled",
"disabled").removeClass("pjf_disabled_input");$("#"+this.options.countyInputId).removeAttr("disabled","disabled").removeClass("pjf_disabled_input")},setReadOnly:function(b){b?($("#"+this.options.provinceInputId).addClass("pjf_readonly_input"),$("#"+this.options.cityInputId).addClass("pjf_readonly_input"),$("#"+this.options.countyInputId).addClass("pjf_readonly_input")):($("#"+this.options.provinceInputId).removeClass("pjf_readonly_input"),$("#"+this.options.cityInputId).removeClass("pjf_readonly_input"),
$("#"+this.options.countyInputId).removeClass("pjf_readonly_input"))},getProvinceValue:function(){return $("#"+this.options.provinceId).val()},setProvinceValue:function(b){$("#"+this.options.provinceId).val(b);$("#"+this.options.provinceInputId).val($("#"+this.options.provinceId).find("option:selected").text());$("#"+this.options.provinceId).trigger("change")},setCityValue:function(b){var c=this,d=$("#"+c.options.provinceId).val(),e=$("#"+c.options.provinceInputId).val();$("#"+c.options.cityId).find("option").remove();
$("#"+c.options.cityInputId).val("");d&&(c.options.appId?PJF.communication.getStandardCode({categoryId:"110256",appId:c.options.appId,async:!1,clcd:d,success:function(d){$("#"+c.options.cityId).append(c.formatter1(d));$("#"+c.options.cityId).val(b);if($.isArray(d)&&0<d.length)for(var e=0;e<d.length;e++)d[e].itemValue==b&&$("#"+c.options.cityInputId).val(d[e].itemName);c.options.countyName&&PJF.communication.getStandardCode({categoryId:"110256",appId:c.options.appId,clcd:b,async:!1,success:function(b){$("#"+
c.options.countyId).find("option").remove();$("#"+c.options.countyId).append(c.formatter1(b));c.options.nullOption?($("#"+c.options.countyId).prepend("<option value=''>"+resource.AREA_NULL_LABEL+"</option>"),$("#"+c.options.countyInputId).val(resource.AREA_NULL_LABEL)):$.isArray(b)&&0<b.length&&($("#"+c.options.countyId).val(b[0].itemValue),$("#"+c.options.countyInputId).val(b[0].itemName))},failure:function(){}})},failure:function(){}}):PJF.communication.ajax({url:"ecpJson?_fw_service_id=getCitys&inData={}&provinceCode="+
d,type:"get",async:!1,dataType:"json",success:function(f){$("#"+c.options.cityId).find("option").remove();c.options.countyName?($("#"+c.options.countyId).find("option").remove(),$("#"+c.options.countyInputId).val(""),d==PJF.constants.AREA_BEIJING||d==PJF.constants.AREA_TIANJING||d==PJF.constants.AREA_SHANGHAI||d==PJF.constants.AREA_CHONGQING?($("#"+c.options.cityId).children().remove(),$("#"+c.options.cityId).append("<option value='"+d+"'>"+e+"</option>"),$("#"+c.options.cityInputId).val(e),$("#"+
c.options.countyId).append(c.formatter(f)),$("#"+c.options.countyInputId).val(f[0].desc)):($("#"+c.options.cityId).append(c.formatter(f)),$("#"+c.options.cityId).val(b),$("#"+c.options.cityInputId).val($("#"+c.options.cityId).find("option:selected").text()),PJF.communication.ajax({url:"ecpJson?_fw_service_id=getCitys&inData={}&provinceCode="+b,type:"get",async:!1,dataType:"json",success:function(b){0<b.length&&($("#"+c.options.countyId).append(c.formatter(b)),$("#"+c.options.countyInputId).val(b[0].desc))}}))):
d==PJF.constants.AREA_BEIJING||d==PJF.constants.AREA_TIANJING||d==PJF.constants.AREA_SHANGHAI||d==PJF.constants.AREA_CHONGQING?($("#"+c.options.cityId).append("<option value='"+d+"'>"+e+"</option>"),$("#"+c.options.cityInputId).val(e)):($("#"+c.options.cityId).append(c.formatter(f)),$("#"+c.options.cityId).val(b),$("#"+c.options.cityInputId).val($("#"+c.options.cityId).find("option:selected").text()),$("#"+c.options.cityId).trigger("change"))},failure:function(){}}))},setCountyValue:function(b){var c=
this,d=$("#"+c.options.cityId).val();c.options.appId?PJF.communication.getStandardCode({categoryId:"110256",appId:c.options.appId,clcd:d,success:function(d){$("#"+c.options.countyId+" option").remove();c.options.nullOption&&$("#"+c.options.countyId).prepend("<option value=''>"+resource.AREA_NULL_LABEL+"</option>");$("#"+c.options.countyId).append(c.formatter1(d));$("#"+c.options.countyId).val(b);for(var f=0;f<d.length;f++)d[f].itemValue==b&&$("#"+c.options.countyInputId).val(d[f].itemName)},failure:function(){}}):
PJF.communication.ajax({url:"ecpJson?_fw_service_id=getCitys&inData={}&provinceCode="+d,type:"get",dataType:"json",success:function(d){$("#"+c.options.countyId).find("option").remove();c.options.nullOption&&$("#"+c.options.countyId).append("<option value=''>"+resource.AREA_NULL_LABEL+"</option>");$("#"+c.options.countyId).append(c.formatter(d));$("#"+c.options.countyId).val(b);$("#"+c.options.countyInputId).val($("#"+c.options.countyId).find("option:selected").text())}})},getCityText:function(){return $("#"+
this.options.cityId).find("option:selected").text()},getCityValue:function(){return $("#"+this.options.cityId).val()},getCountyText:function(){if(this.options.countyName)return $("#"+this.options.countyId).find("option:selected").text()},getCountyValue:function(){if(this.options.countyName)return $("#"+this.options.countyId).val()},getClassName:function(){return"PJF.ui.areaSelector"},getDetailValue:function(){return $("#"+this.options.detailId).val()},bindProvinceEvent:function(b,c){$("#"+this.options.provinceId).unbind("province"+
b).bind(b+".province"+b,c)},bindCityEvent:function(b,c){$("#"+this.options.cityId).unbind("city"+b).bind(b+".city"+b,c)},bindCountyEvent:function(b,c){$("#"+this.options.countyId).unbind("county"+b).bind(b+".county"+b,c)},clear:function(){$("#"+this.options.provinceId).val("");$("#"+this.options.cityId).val("");$("#"+this.options.countyId).val("");$("#"+this.options.provinceInputId).val("");$("#"+this.options.cityInputId).val("");$("#"+this.options.countyInputId).val("")},destroy:function(){$("#"+
this.options.containerId1).remove();$("#"+this.options.containerId2).remove();$("#"+this.options.containerId3).remove();$("#"+this.options.provinceSpanId).die("click");$("#"+this.options.provinceId).die("change");$("#"+this.options.cityId).die("change");$("#"+this.options.provinceId).siblings().remove();$("#"+this.options.provinceId).remove();$("#"+this.options.countyId).die("change");$("#"+this.options.citySpanId).die("click");$("#"+this.options.countySpanId).die("click");this.options.cityInputId=
null;this.options.countyInputId=null;this.options.provinceInputId=null;this.options.cityId=null;this.options.provinceId=null;this.options.countyId=null;this.options.citySpanId=null;this.options.provinceSpanId=null;this.options.countySpanId=null;this.options.containerId1=null;this.options.containerId2=null;this.id=this.com=this.options.containerId3=null},setValue:function(b){if(6==b.length){var c=b.substring(0,2)+"0000";this.setProvinceValue(c);c=b.substring(0,4)+"00";this.options.cityName&&(0<$("#"+
this.options.cityId).find("option[value='"+b+"']").length?this.setCityValue(b):0<$("#"+this.options.cityId).find("option[value='"+c+"']").length&&this.setCityValue(c));this.options.countyName&&this.setCountyValue(b)}}});PJF.apply(PJF.ui.areaSelector.prototype,{validateParam:function(){return!0}});PJF.ui.coverFlow=PJF.extend(PJF.ui.component,{defaultSettings:{liClassArray:"pos_0 pos_1 pos_2 pos_3 pos_4 pos_5 pos_6 pos_7 pos_8".split(" "),liClassPrefix:"pos_",textClassArray:"imgInfo_0 imgInfo_1 imgInfo_2 imgInfo_3 imgInfo_4 imgInfo_5 imgInfo_6 imgInfo_7 imgInfo_8".split(" "),textClassPrefix:"imgInfo_",textCss:[["20px","14px"],["20px","14px"],["30px","23px"],["20px","14px"],["35px","27px"]]},elements:{componentWidth:960,textHeight:[40,35,35,30,30,20,20]},init:function(b){var c=this,d=this.defaultSettings;
this.conf=b;this.data=[];this.onChoose=b.onChoose;this.com.addClass("ytd_coverFlow");this.ulId=this.generateId();$("<ul id='"+this.ulId+"'></ul>").appendTo(this.com);this.ulDom=this.com.find("#"+this.ulId);for(var e=0;e<b.data.length;e++){var f=e<d.liClassArray.length?e:0==e%2?d.liClassArray.length-1:d.liClassArray.length-2,g="<li class ='"+d.liClassPrefix+f+"'><img src = '"+b.data[e].url+"' ></img>";b.data[e].text&&(g+="<div class = '"+d.textClassPrefix+f+"'><span class = 'imgInfoFont'>"+(b.data[e].text?
b.data[e].text:"")+"</span></div>");g+="</li>";g=$(g);0==f%2?g.appendTo(this.ulDom)&&this.data.push(b.data[e]):g.prependTo(this.ulDom)&&this.data.unshift(b.data[e])}this.liAttrs=[];this.liDoms=this.com.find("li");this.com.find("li").each(function(){c.liAttrs.push([$(this).css("left"),$(this).css("top"),$(this).css("opacity"),$(this).css("zIndex"),$(this).css("width"),$(this).attr("class")])});this.textAttrs=[];this.textDoms=this.com.find("div");this.fontResize();this.initEvent()},initEvent:function(){var b=
this,c=this.defaultSettings,d=this.conf;this.com.delegate("li","click",function(){var e=$(this).attr("class").substring(c.liClassPrefix.length),f=parseInt((parseInt(e)+1)/2);0==e?b.chooseMiddle():0!=e%2?b.moveRight(f,"normal"):b.moveLeft(f,"normal");d.chooseAfterClick&&b.onChoose&&b.chooseMiddle()});this.com.delegate("li","mousedown",function(c){b.startXY={x:c.clientX,y:c.clientY};b.startMoveNum=0;b.startMove=!0;return!1});this.com.bind("mouseleave",function(){b.startMove=!1;b.startXY=null;return!1});
this.com.bind("mouseup",function(){b.startMove=!1;b.startXY=null;return!1});this.com.delegate("li","mousemove",function(e){if(b.startXY){var e=parseInt((e.clientX-b.startXY.x)/b.elements.componentWidth*(c.liClassArray.length-2)),f=e-b.startMoveNum;!b.checkAnimated&&(d.chooseAfterDrag&&0<Math.abs(f))&&(b.checkAnimated=setInterval(function(){for(var c=!0,d=0;d<b.liDoms.length;d++)if($(b.liDoms[d]).is(":animated")){c=!1;break}c&&(clearInterval(b.checkAnimated),b.checkAnimated=null,b.chooseMiddle())},
400));0>f?b.moveLeft(-f,100):0<f&&b.moveRight(f,100);b.startMoveNum=e}})},moveRight:function(b,c){for(var d=0;d<b;d++)this.liAttrs.push(this.liAttrs[0]),this.liAttrs.shift(),this.data.unshift(this.data[this.data.length-1]),this.data.pop();this.shift(c)},moveLeft:function(b,c){for(var d=0;d<b;d++)this.liAttrs.unshift(this.liAttrs[this.liAttrs.length-1]),this.liAttrs.pop(),this.data.push(this.data[0]),this.data.shift();this.shift(c)},shift:function(b){for(var c=0;c<this.liDoms.length;c++)this.liDoms[c].style.zIndex=
this.liAttrs[c][3],$(this.liDoms[c]).animate({left:this.liAttrs[c][0],top:this.liAttrs[c][1],opacity:this.liAttrs[c][2],width:this.liAttrs[c][4]},b),$(this.liDoms[c]).attr("class",this.liAttrs[c][5]);for(c=0;c<this.textDoms.length;c++)b=$(this.textDoms[c]).parent().attr("class"),b=this.defaultSettings.textClassPrefix+b.substring(4),$(this.textDoms[c]).attr("class",b);this.fontResize()},fontResize:function(){for(var b=0;b<this.textDoms.length;b++){$(this.textDoms[b]).removeAttr("style");var c=$(this.textDoms[b]).find("span").text();
if(7<c.length&&14>=c.length)c=7*$(this.textDoms[b]).css("fontSize").match(/\d+/)[0]/(c.length+2)+"px",$(this.textDoms[b]).css("fontSize",c);else if(14<c.length){var c=$(this.textDoms[b]).css("fontSize").match(/\d+/)[0]/2+"px",d=$(this.textDoms[b]).css("line-height").match(/\d+/)[0]/2+"px";$(this.textDoms[b]).css("fontSize",c);$(this.textDoms[b]).css("line-height",d)}}},chooseMiddle:function(){if(this.onChoose)this.onChoose(this.getSelected())},getValues:function(){},choosePic:function(b){if(b)for(var c=
0;c<this.liDoms.length;c++)if($(this.liDoms[c]).find("img").attr("src")==b.url){$(this.liDoms[c]).trigger("click");break}},getSelected:function(){return this.data[parseInt(this.data.length/2)]},getClassName:function(){return"PJF.ui.coverFlow"},destroy:function(){this.com.children().remove();this.com.removeClass("ytd_coverFlow");PJF.ui.componentMgr.remove(this.id);this.id=this.com=null},disable:function(){this.com.undelegate("click").undelegate("mousedown").undelegate("mousemove");this.com.unbind("mouseup").unbind("mouseleave");
this.com.css("background-color","#F0F0F0").css("opacity",0.6)},enable:function(){this.initEvent();this.com.css("background-color","transparent").css("opacity",1)}});PJF.ui.grid=PJF.extend(PJF.ui.component,{init:function(b){this.gridDom={};this.gridData=b.data;this.gridCurrentLoadedRows=[];b=this.params=this.conf=PJF.apply(b,{width:b.width||PJF.YTD.GRID_DEFAULT_WIDTH*PJF.YTD.SIZE_RATE,height:b.height||PJF.YTD.GRID_DEFAULT_HEIGHT*PJF.YTD.SIZE_RATE,gridLayoutClass:b.gridLayoutClass,minShowRowCount:b.minShowRowCount,maxShowRowCount:b.maxShowRowCount,minContentHeight:b.minContentHeight||54*b.minShowRowCount*PJF.YTD.SIZE_RATE||PJF.YTD.GRID_MIN_CONTENT_HEIGHT*PJF.YTD.SIZE_RATE,
maxContentAutoSizeHeight:b.maxContentAutoSizeHeight||54*b.maxShowRowCount*PJF.YTD.SIZE_RATE||PJF.YTD.GRID_MAX_CONTENT_AUTOSIZE_HEIGHT*PJF.YTD.SIZE_RATE,singleSelect:!1!==b.singleSelect,rownumbers:b.rownumbers,url:b.url,async:!1!==b.async,type:b.type,traditional:b.traditional,queryParams:b.queryParams||{},pageSizeParamName:b.pageSizeParamName,pageNumberParamName:b.pageNumberParamName,paginationParamsLevelName:b.paginationParamsLevelName,totalPath:b.totalPath||"rows",rowsPath:b.rowsPath||"total",columns:b.columns,
defaultAlign:b.defaultAlign||"left",nowrap:b.nowrap,initMsg:b.initMsg||PJF.YTD.GRID_INIT_INFO,noDataMsg:b.noDataMsg||PJF.YTD.GRID_NODATA_INFO,loadingMsg:b.loadingMsg||PJF.YTD.GRID_LOADING_MSG,sortName:b.sortName,sortOrder:b.sortOrder||"asc",onClickRow:b.onClickRow,onDblClickRow:b.onDblClickRow,onBeforeCheckRow:b.onBeforeCheckRow,rowStyler:b.rowStyler,onBeforeLoad:b.onBeforeLoad||function(){},onLoadSuccess:b.onLoadSuccess,onLoadFailure:b.onLoadFailure,onLoadError:b.onLoadError});this.gridOptions={hasCheckOrRadio:!1,
isNeedAdjustRowHeight:!1,hasSorted:!1,paginationOptions:{currentPageNumber:1,currentPageGroupNumber:1,totalPageGroupNumber:1,totalPageNumber:1,isLocalPagination:!!b.isLocalPagination,pageSize:b.pageSize||10,showNumberSize:b.showNumberSize||6,isShowPaginationNumber:b.isShowPaginationNumber,pagination:!1!==b.pagination,pageChangeHandler:b.pageChangeHandler,paginationBtnStatus:{first:!1,prev:!1,next:!1,last:!1}},columnOptions:{fixedColumnWidth:0,autoColumns:{}},gridConstant:{BORDER_LR_TOTAL_WIDTH:4,
GRID_SCROLL_BAR_WIDTH:this.getSrollBarWidth(),ckColumnWidth:76,GRID_ROW_NUMBER_FIELD_WIDTH:26,GRID_COLUMN_WIDTH_SIZE:20,GRID_ROW_NUMBER_FIELD:"GRID-ROWNUMBER"},checkOptions:{checkedRowIndexMap:new PJF.util.Collection,allPageCheckedRowIndexMap:new PJF.util.Collection,isAddOrRemoveData:!1,lastCheckedRowDom:null}};this.paramsFilter();this.renderGrid();this.regEventHandler()},paramsFilter:function(){if(this.conf.rownumbers){var b=this.gridOptions.gridConstant;this.conf.columns[0].splice(0,0,{field:b.GRID_ROW_NUMBER_FIELD,
width:b.GRID_ROW_NUMBER_FIELD_WIDTH,rowNumber:!0,title:"&nbsp;",align:"center"})}},renderGrid:function(){this.createGridDom();this.createHeaderDom();this._loadData();this.adjustGridStyle()},renderContent:function(){this.createBodyDom();this.createFooterDom();this.renderPagination()},createGridDom:function(){if(!this.com.hasClass("YTD-Grid")){this.com.addClass="YTD-Grid";$('<\!-- \u8868\u683c\u6700\u5916\u5c42 --\> <div class="grid-container"><style type="text/css"></style> <\!-- \u53ef\u80fd\u7684\u8868\u683ctitle --\> <div class="grid-title">grid-title</div> <div class="clear"></div> <\!-- \u53ef\u80fd\u7684\u9884\u7559\u7684\u6309\u94ae\u680f\u4f4d --\>  <div class="grid-toolbar">grid-toolbar</div>   <div class="clear"></div>     <\!-- \u8868\u683c\u7684\u5185\u5bb9\u663e\u793a\u533a --\>       <div class="grid-content"><\!-- \u8868\u683c\u8868\u5934 --\><div class="grid-header">     <div class="grid-header-left-container">     \t\t<div class="grid-header-left"></div>     </div>     <div class="grid-header-right-container">          <div class="grid-header-right"></div>     </div>   </div>     <div class="clear"></div>     <\!-- \u8868\u683c\u5185\u5bb9\u533a --\>     <div class="grid-body">        <div class="grid-body-left-container">          <div class="grid-body-left"></div>        </div>        <div class="grid-body-right-container">            <div class="grid-body-right"></div>        </div>    </div>    <div class="clear"></div>    <\!-- \u8868\u683c\u9875\u811a --\>    <div class="grid-footer">     <div class="grid-footer-left"></div>    <div class="grid-footer-right"></div>   </div> </div><div class="clear"></div> <\!-- \u5206\u9875\u680f --\><div class="grid-pagination-bar"></div></div>').appendTo(this.com);
var b=$("div.grid-container",this.com);this.gridDom={container:b,style:b.children("style")[0],title:$("div.grid-title",b),toolbar:$("div.grid-toolbar",b),content:$("div.grid-content",b),header:$("div.grid-header",b),headerLeft:$("div.grid-header-left",b),headerLeftContainer:$("div.grid-header-left-container",b),headerRight:$("div.grid-header-right",b),headerRightContainer:$("div.grid-header-right-container",b),body:$("div.grid-body",b),bodyLeftContainer:$("div.grid-body-left-container",b),bodyLeft:$("div.grid-body-left",
b),bodyRightContainer:$("div.grid-body-right-container",b),bodyRight:$("div.grid-body-right",b),footer:$("div.grid-footer",b),footerLeft:$("div.grid-footer-left",b),footerRight:$("div.grid-footer-right",b),paginationBar:$("div.grid-pagination-bar",b)}}},createHeaderDom:function(){this.gridOptions.columnOptions.isAllFixedWidth=!0;var b=this.conf.columns[0],c=[];c.push('<div class="grid-head-row">');for(var d=0,e=b.length;d<e;d++)c.push(this.headerRender(b[d]));c.push('<span class="grid-head-empty-cell">&nbsp;</span>');
c.push("</div>");this.gridDom.headerRight.html(c.join(""))},headerRender:function(b){var c=[],d="";b.width&&"auto"!==b.width?(b.width=parseInt(b.width,10),d+="width:"+b.width+"px;",this.gridOptions.columnOptions.fixedColumnWidth+=b.width,b.isUserDefWidth=!0):this.gridOptions.columnOptions.isAllFixedWidth=!1;b.headAlign=b.headAlign||b.align||this.conf.defaultAlign;d+="text-align:"+b.headAlign;void 0===b.title&&(b.title="");c.push('<div class="grid-cell grid-head-cell grid-cell-field-'+b.field+(b.hidden?
" grid-hidden-cell":"")+'" field="'+b.field+'" style="'+d+'">');c.push('<div class="grid-cell-container grid-head-cell-container">');(d=this.isCheckOrRadio(b))?(c.push('<div class="grid-ck '+(b.isCheckbox?"grid-"+d:"")+'"></div>'),this.gridOptions.columnOptions.fixedColumnWidth+=this.gridOptions.gridConstant.ckColumnWidth,this.gridOptions.hasCheckOrRadio=!0):c.push('<div class="cell-text header-cell-text">'+b.title+"</div>");c.push("</div></div>");return c.join("")},createBodyDom:function(){0===this.gridData.rows.length?
this.setNotificationMsg(!0):this.bodyRender()},bodyRender:function(){var b=this.gridCurrentLoadedRows;if(b&&b instanceof Array&&0!==b.length){for(var c=this.conf.columns[0],d=[],e=-1,f=!1,g=this.gridOptions.checkOptions,h=g.allPageCheckedRowIndexMap,l=0,m=b.length;l<m;l++)f=this.getAbsoluteRowIndex(l),f=h.containsKey(f+""),d.push(this.rowRender(l,b[l],c,f)),f&&(e=l,this.addCheckedRowIndex(l,!1));this.gridDom.bodyRight.html(d.join(""));-1!=e&&(g.lastCheckedRowDom=this.getRowDom(e))}},rowRender:function(b,
c,d,e){var f=this.conf,g=[],h=this._rowStyler(b,c);g.push('<div class="grid-row'+(0==b%2?" grid-row-odd":"")+(e?" grid-row-checked":"")+'" rowIndex="'+b+'" style="'+h+'">');for(var h=0,l=d.length;h<l;h++){var m=d[h],n="",q="";m.width&&"auto"!==m.width&&(m.width=parseInt(m.width,10),n+="width:"+m.width+"px;",!1===f.nowrap&&(q+="white-space:normal;",this.gridOptions.isNeedAdjustRowHeight=!0));m.align=m.align||f.defaultAlign;n+="text-align:"+m.align;g.push('<div class="grid-cell grid-body-cell grid-cell-field-'+
m.field+(m.hidden?" grid-hidden-cell":"")+'" field="'+m.field+'" style="'+n+'">');g.push('<div class="grid-cell-container grid-body-cell-container">');(n=this.isCheckOrRadio(m))?g.push('<div class="grid-ck grid-'+n+(e?" grid-"+n+"-checked":"")+'"></div>'):(n=c[m.field],m.formatter&&(n=m.formatter(n,c,b,m)),void 0==n&&(n=""),!0===m.rowNumber&&(n=b+1),g.push('<div class="cell-text body-cell-text" style="'+q+'">'+n+"</div>"));g.push("</div></div>")}g.push("</div>");return g.join("")},createFooterDom:function(){},
footerRender:function(){},renderPagination:function(){this.createPaginationDom();this.createPagination();this.regPaginationBtnClickHandler()},createPaginationDom:function(){if(this.gridOptions.paginationOptions.pagination){var b=this.gridDom,c=this.gridDom.paginationBar;c.html('<div class="grid-pagination-container"><span class="grid-pagination-btn grid-pagination-first"> </span><span class="grid-pagination-btn grid-pagination-prev"> </span><div class="grid-pagination-number-container"> </div><span class="grid-pagination-btn grid-pagination-next"> </span><span class="grid-pagination-btn grid-pagination-last"> </span><span class="grid-pagination-btn grid-pagination-desc"> </span></div>');
b.paginationFirst=$("span.grid-pagination-first",c);b.paginationPrev=$("span.grid-pagination-prev",c);b.paginationNumber=$("div.grid-pagination-number-container",c);b.paginationNext=$("span.grid-pagination-next",c);b.paginationLast=$("span.grid-pagination-last",c);b.paginationDesc=$("span.grid-pagination-desc",c);b.paginationDesc.html("0/0")}},createPagination:function(){var b=(this.gridData||{}).total||0;if(!(0>=b)){var c=this.gridOptions.paginationOptions;c.totalPageNumber=Math.ceil(b/c.pageSize);
c.totalPageGroupNumber=Math.ceil(c.totalPageNumber/c.showNumberSize);this.updatePagination();this.updatePaginationBtnStatus()}},updatePaginationParams:function(b,c){if(arguments.length){var d=this.gridOptions.paginationOptions;1==arguments.length&&"Object"==typeof c?$.extend(d,c):d.pageSize=b||d.pageSize}},updatePagination:function(){var b=this.gridOptions.paginationOptions,c=b.currentPageGroupNumber,d=b.showNumberSize,e=b.currentPageNumber,f=b.totalPageNumber,b=(c-1)*d+1,c=c*d;c>f&&(c=f);for(d=[];b<=
c;b++)d.push('<span class="grid-pagination-btn grid-pagination-number '+(b==e?"grid-pagination-number-current":"")+'" number="'+b+'">'+(10>b?"0"+b:b)+"</span>"),d.push('<span class="grid-pagination-btn grid-pagination-number grid-pagination-marginLine">|</span>');d.pop();this.gridDom.paginationNumber.html(d.join(""));this.updatePaginationBtnStatus()},updatePaginationBtnStatus:function(b,c,d,e){function f(b,c,d){c="grid-pagination-"+c+"-disable";d?b.removeClass(c):b.removeClass(c).addClass(c)}var g=
this.gridDom,h=!1,l=!1,m=!1,n=!1,q=this.gridOptions.paginationOptions,p=q.currentPageNumber,r=q.totalPageNumber;1<p&&(h=!0);1<p&&(l=!0);p<r&&(m=!0);p<r&&(n=!0);void 0!=b&&(h=b);void 0!=c&&(l=c);void 0!=d&&(m=d);void 0!=e&&(n=e);f(g.paginationFirst,"first",h);f(g.paginationPrev,"prev",l);f(g.paginationNext,"next",m);f(g.paginationLast,"last",n);q.paginationBtnStatus={first:h,prev:l,next:m,last:n};g.paginationDesc.html((9<p?p:"0"+p)+"/"+(9<r?r:"0"+r))},regPaginationBtnClickHandler:function(){var b=
this,c=this.gridDom,d=this.gridOptions.paginationOptions;c.paginationNumber.unbind().bind("click",function(c){var d=$(c.target);d.hasClass("grid-pagination-number")&&!d.hasClass("grid-pagination-marginLine")&&(d=parseInt(d.attr("number"),10),b.pageChangeHandler(d),c.stopPropagation())});c.paginationFirst.unbind().bind("click",function(c){d.paginationBtnStatus.first&&(b.pageChangeHandler(1,1),c.stopPropagation())});c.paginationPrev.unbind().bind("click",function(c){if(d.paginationBtnStatus.prev){var f=
d.currentPageNumber,f=f-1;1>f?alert("Error: \u5185\u90e8\u903b\u8f91\u9519\u8bef currentPageNumber =  "+f):(b.pageChangeHandler(f),c.stopPropagation())}});c.paginationNext.unbind().bind("click",function(c){if(d.paginationBtnStatus.next){var f=d.currentPageNumber,f=f+1;f>d.totalPageNumber?alert("Error: \u5185\u90e8\u903b\u8f91\u9519\u8bef currentPageNumber =  "+f+" > totalPageNumber("+d.totalPageNumber+")"):(b.pageChangeHandler(f),c.stopPropagation())}});c.paginationLast.unbind().bind("click",function(c){d.paginationBtnStatus.last&&
(b.pageChangeHandler(d.totalPageNumber,d.totalPageGroupNumber),c.stopPropagation())})},pageChangeHandler:function(b,c){if(!(this.conf.pageChangeHandler&&!1===this.conf.pageChangeHandler(b))){var d=this.gridOptions.paginationOptions;d.currentPageNumber!=b&&(d.currentPageNumber=b,c||(c=Math.ceil(b/d.showNumberSize)),d.currentPageGroupNumber=c,this.clearCheckedRowIndex(!1),this._loadData(),this.adjustGridStyle())}},showLoading:function(){var b=this.gridDom;if(!b.loadingMask){var c='<div class="grid-loading-content">'+
this.conf.loadingMsg+"</div>";b.loadingMask=$('<div id="'+this.conf.dom+'_grid_loadding" class="grid-loading-mask"> </div>').appendTo(b.container);b.loadingMsg=$(c).appendTo(b.container)}b.loadingMask.css("display","block");b.loadingMsg.css("display","block");var c=b.content.width(),d=b.content.height();b.loadingMsg.css("left",(c-b.loadingMsg.width())/2);b.loadingMsg.css("top",(d-b.loadingMsg.height())/2)},removeLoading:function(){var b=this.gridDom.loadingMask,c=this.gridDom.loadingMsg;b&&(b.css("display",
"none"),c.css("display","none"))},resetPagination:function(){PJF.apply(this.gridOptions.paginationOptions,{currentPageNumber:1,currentPageGroupNumber:1,totalPageGroupNumber:1,totalPageNumber:1,paginationBtnStatus:{first:!1,prev:!1,next:!1,last:!1}});this.renderPagination()},updatePageStyle:function(b,c){for(var d=this.gridOptions.columnOptions.autoColumns,e=[],f=0,g=d.length;f<g;f++){var h=d[f],l=h.currentColumnMaxWidth+b;f+1==g&&(l+=c||0);e.push(".grid-cell-field-"+h.field+"{width:"+l+"px;min-width:"+
l+"px;}")}try{this.gridDom.style.innerHTML=e.join("")}catch(m){this.gridDom.style.styleSheet.cssText=e.join("")}},_dataFilter:function(){this._dataFormatter();var b=this.gridData.rows,c=-1,d=-1,e=this.gridOptions.paginationOptions;e.isLocalPagination&&(d=e.currentPageNumber,e=e.pageSize,c=(d-1)*e,d*=e,b=b.slice(c,d));this.gridCurrentLoadedRows=b;this._dataSorter(c,d)},_dataFormatter:function(){if(this.gridData)if(this.gridData instanceof Array)this.gridData={total:this.gridData.length,rows:this.gridData};
else{if(void 0===this.gridData.rows)try{this.gridData.rows=eval("(this.gridData."+this.conf.rowsPath+")"),this.gridData.rows||(this.gridData.rows=[])}catch(b){this.gridData.rows=[]}else this.gridData.rows instanceof Array||(alert("Error: \u8868\u683c\u6570\u636e\u4e2d rows\u5c5e\u6027\u5fc5\u987b\u4e3a\u6570\u7ec4\uff01"),this.gridData.rows=[]);if(void 0===this.gridData.total)try{this.gridData.total=eval("(this.gridData."+this.conf.totalPath+")")}catch(c){this.gridData.total=0}try{this.gridData.total=
parseInt(this.gridData.total,10),this.gridData.total||(this.gridData.total=0)}catch(d){alert("Error: \u8868\u683c\u6570\u636e\u4e2d total\u5b57\u6bb5\u4e0d\u662f\u6570\u5b57\uff01"),this.gridData.total=0}0===this.gridData.total&&(this.gridData.total=this.gridData.rows.length)}else this.gridData={total:0,rows:[]}},_dataSorter:function(b){var c=this.conf.sortName;if(c){var d=this.conf.sortOrder,e=this.getColumn(c);if(e){var f=e.sorter||function(b,c){return b>c?1:-1};this.gridCurrentLoadedRows.sort(function(b,
e){return f(b[c],e[c],b,e)*("asc"==d?1:-1)});e=this.gridOptions.paginationOptions;e.isLocalPagination?this.gridData.rows.splice.apply(this.gridData.rows,[b,e.pageSize].concat(this.gridCurrentLoadedRows)):this.gridData.rows=this.gridCurrentLoadedRows}else alert("Error: \u53c2\u6570sortName("+c+")\u6307\u5b9a\u7684\u5217\u4e0d\u5b58\u5728\uff01")}},_loadData:function(){this.conf.url?this._doSendReq():this._doLoadData()},updateReqParams:function(b){$.extend(this.conf,b)},_prepareReqParams:function(){var b=
this.conf,c=b.queryParams;if(c){c.jsonData=c.jsonData||{};if("string"==typeof c.jsonData)try{c.jsonData=eval("("+c.jsonData+")")}catch(d){alert("Error: queryParams\u5c5e\u6027jsonData\u4e0d\u662f\u6807\u51c6\u7684JSON\u5b57\u7b26\u4e32\u3002")}var e=b.pageNumberParamName||"PAGE_JUMP",f={};f[b.pageSizeParamName||"REC_IN_PAGE"]=this.gridOptions.paginationOptions.pageSize;f[e]=this.gridOptions.paginationOptions.currentPageNumber;b=b.paginationParamsLevelName||"_pagination";if("."==b)for(var g in f)c.jsonData[g]=
f[g];else c.jsonData[b]=f;c.jsonData=PJF.util.json2str(c.jsonData)}},_doSendReq:function(){var b=this.conf,c=this;this._prepareReqParams();!1===b.onBeforeLoad.call(this,b.queryParams)?this._successCallBack():$.ajax({url:b.url,dataType:b.dataType||PJF.YTD.AJAX_DATA_TYPE,data:b.queryParams,async:b.async,traditional:b.traditional,type:b.type||PJF.YTD.AJAX_METHOD,timeout:b.timeOut||PJF.YTD.AJAX_TIMEOUT,success:function(b,e,f){c._successCallBack(b,e,f)},error:function(b,e,f){c._errorCallBack(b,e,f)},complete:function(){}})},
_successCallBack:function(b){this.gridData=b||{};this._doLoadData();this.adjustGridStyle()},_errorCallBack:function(b,c,d){if(this.conf.onLoadError)this.conf.onLoadError(b,c,d);this.gridData={};this._doLoadData();this.adjustGridStyle()},_dataErrorHandler:function(){var b=this.gridData;if(b&&b.BK_STATUS&&b.BK_STATUS!=PJF.constants.BK_CODE_SUCCESS)if(this.conf.onLoadFailure)this.conf.onLoadFailure(b);else{var c="";b._COMMON&&b._COMMON.SYS_EVT_TRACE_ID&&(c=b._COMMON.SYS_EVT_TRACE_ID);var d=b.BK_DESC;
b.FLLW_GUIDE&&(d+="~"+b.FLLW_GUIDE);alert("\u903b\u8f91\u5904\u7406\u5931\u8d25\uff1a\nTraceId:"+c+"\n desc: "+d)}},_onLoadSuccess:function(){var b=this;setTimeout(function(){if(b.conf.onLoadSuccess)b.conf.onLoadSuccess()},0)},_doLoadData:function(){if(this.conf.loadFilter){var b=this.conf.loadFilter(this.gridData);b&&(this.gridData=b)}this._dataErrorHandler();this._dataFilter();this.renderContent();this._onLoadSuccess()},resizeColumnWidth:function(){var b=this.gridDom;try{b.style.innerHTML=""}catch(c){b.style.styleSheet.cssText=
""}b.headerRight.css("width","");b.bodyRight.css("width","");var d=this.gridOptions.gridConstant,e=b.content.innerWidth()-17-d.BORDER_LR_TOTAL_WIDTH-d.GRID_SCROLL_BAR_WIDTH,f=0,g=this.conf.columns[0];this.gridOptions.columnOptions.autoColumns=[];for(var h=this.gridOptions.columnOptions.autoColumns,l=0,m=0,n=0,q=g.length;n<q;n++){var p=g[n];if(!0!=p.hidden){var r=this.getColumnMaxWidth(p);p.currentColumnMaxWidth=r;f+=r;m++;!p.isUserDefWidth&&!p.isCheckOrRadio&&(h.push(p),l++)}}f+=8*m-4;h=g=0;e>f?(b=
e-f,g=Math.floor(b/l),h=b%l):(f+=1+d.GRID_SCROLL_BAR_WIDTH,b.headerRight.width(f+d.BORDER_LR_TOTAL_WIDTH),b.bodyRight.width(f-d.GRID_SCROLL_BAR_WIDTH+d.BORDER_LR_TOTAL_WIDTH));this.updatePageStyle(g,h)},resizeRowHeight:function(){$("div.grid-row",this.gridDom.bodyRight).each(function(){var b=$(this),c=b.height();$("div.grid-cell-container",b).height(c)})},resetGridStatus:function(){this.gridOptions.hasSorted=!1;this.gridData=null;this.gridData={total:0,rows:[]};this.gridCurrentLoadedRows=null;this.gridCurrentLoadedRows=
[];this.clearCheckedRowIndex();this.setNotificationMsg()},setNotificationMsg:function(b){var c=[];c.push('<div class="grid-notification-msg">');b?c.push(this.conf.noDataMsg):c.push(this.conf.initMsg);c.push("</div>");this.gridDom.bodyRight.html(c.join(""))},adjustGridStyle:function(b){var c=this.conf,d=this.gridDom;d.container.css("width",c.width);d.container.css("height",c.height);c.gridLayoutClass&&d.container.removeClass(c.gridLayoutClass).addClass(c.gridLayoutClass);b?(d.content.css("height",
""),d.bodyRightContainer.css("height","")):"auto"!=c.height?(b=0,this.gridOptions.paginationOptions.pagination&&(b=d.paginationBar.height()+10),d.content.height(c.height-b),d.bodyRightContainer.height(c.height-50-b)):"auto"===c.height&&(d.bodyRight.css("max-height",c.maxContentAutoSizeHeight),d.bodyRight.css("min-height",c.minContentHeight));this.resizeColumnWidth();this.resizeRowHeight()},resize:function(){arguments.length?alert("resize \u6682\u65f6\u4e0d\u652f\u6301\u4efb\u4f55\u53c2\u6570\uff01\u672a\u514d\u5f15\u8d77bug \u8bf7\u52ff\u4f7f\u7528\u4efb\u4f55\u53c2\u6570\uff01"):
this.adjustGridStyle()},regEventHandler:function(){var b=this.gridDom,c=this;b.headerRight.unbind().bind("click",function(){});b.bodyRight.unbind().bind("click",function(b){var e=$(b.target).closest("div.grid-row");if(e.length){var f=e.attr("rowindex");c._onClickRow(f);e.hasClass("grid-row-checked")?c.unCheckRow(f,e):c.checkRow(f,e);b.stopPropagation()}}).bind("dblclick",function(b){var e=$(b.target).closest("div.grid-row");e.length&&(e=e.attr("rowindex"),c._onDblClickRow(e),b.stopPropagation())});
b.headerRight.unbind().bind("click",function(b){var e=$(b.target).closest("div.grid-cell");e.length&&(!1===c.conf.singleSelect&&(e=$("div.grid-checkbox",e),1==e.length&&(e.hasClass("grid-checkbox-checked")?c.unCheckAllRow():c.checkAllRow())),b.stopPropagation())});b.bodyRightContainer.bind("scroll",function(){b.headerRightContainer.scrollLeft($(this).scrollLeft())});b.bodyRightContainer.scrollLeft(1);b.bodyRightContainer.scrollLeft(0)},checkRow:function(b,c){if(void 0===b&&void 0===c)return alert("Error: rowIndex rowDom \u4e0d\u80fd\u5168\u4e3a\u7a7a\uff01"),
!1;c||(c=this.getRowDom(b));void 0===b&&(b=c.attr("rowindex"));b=parseInt(b,10);if(!1!==this._onBeforeCheckRow(b)){var d=this.gridOptions.checkOptions;this.conf.singleSelect&&d.lastCheckedRowDom&&this.unCheckRow(d.lastCheckedRowDom.attr("rowindex"));c.removeClass("grid-row-checked").addClass("grid-row-checked");if(this.gridOptions.hasCheckOrRadio){var e="grid-"+(this.conf.singleSelect?"radio":"checkbox")+"-checked";$("div.grid-ck",c).removeClass(e).addClass(e)}d.lastCheckedRowDom=c;this.addCheckedRowIndex(b);
this._updateCheckAllStatus()}},checkAllRow:function(){this.clearCheckedRowIndex();var b=this;if(this.gridOptions.hasCheckOrRadio){var c=this.conf.singleSelect?"radio":"checkbox",d="grid-"+c+"-checked";$.each(this.getColumnDom(c,null,!1),function(c){$("div.grid-ck",this).removeClass(d).addClass(d);b.addCheckedRowIndex(c)})}else for(var c=this.gridCurrentLoadedRows.length,e=0;e<c;e++)this.addCheckedRowIndex(e);this._updateCheckAllStatus()},unCheckRow:function(b,c){if(void 0===b&&void 0===c)return alert("Error: rowIndex rowDom \u4e0d\u80fd\u5168\u4e3a\u7a7a\uff01"),
!1;c||(c=this.getRowDom(b));void 0===b&&(b=c.attr("rowindex"));b=parseInt(b,10);c.removeClass("grid-row-checked");if(this.gridOptions.hasCheckOrRadio){var d="grid-"+(this.conf.singleSelect?"radio":"checkbox")+"-checked";$("div.grid-ck",c).removeClass(d)}this.removeCheckedRowIndex(b);!1!==this.conf.singleSelect&&(this.gridOptions.checkOptions.lastCheckedRowDom=null);this._updateCheckAllStatus()},unCheckAllRow:function(){if(this.gridOptions.hasCheckOrRadio){var b=this.conf.singleSelect?"radio":"checkbox",
c="grid-"+b+"-checked";$.each(this.getColumnDom(b,null,!1),function(){$("div.grid-ck",this).removeClass(c)})}this.clearCheckedRowIndex();this._updateCheckAllStatus()},_updateCheckAllStatus:function(){if(this.gridOptions.hasCheckOrRadio&&!this.conf.singleSelect){var b=this.getCurrentPageCheckedRowIndexs().length,c=this.gridDom.headerRight;b===this.gridCurrentLoadedRows.length&&0!=b?$("div.grid-checkbox",c).removeClass("grid-checkbox-checked").addClass("grid-checkbox-checked"):$("div.grid-checkbox",
c).removeClass("grid-checkbox-checked")}},getSelectedRow:function(){if(!this.conf.singleSelect)return alert("Error: \u5f53\u524d\u72b6\u6001\u4e3a\u591a\u9009\uff0c\u8bf7\u4f7f\u7528 getSelectedRows \u65b9\u6cd5\uff01"),null;var b=this.gridOptions.checkOptions;return b.lastCheckedRowDom?(b=b.lastCheckedRowDom.attr("rowindex"),b=parseInt(b,10),this.gridCurrentLoadedRows[b]):null},getSelectedRows:function(){var b=[];if(this.conf.singleSelect)return alert("Error: \u5f53\u524d\u72b6\u6001\u4e3a\u5355\u9009\uff0c\u8bf7\u4f7f\u7528 getSelectedRow \u65b9\u6cd5\uff01"),
b;for(var c=this.getCurrentPageCheckedRowIndexs(),d=this.gridCurrentLoadedRows,e=0,f=c.length;e<f;e++)b.push(d[c[e]]);return b},getRowData:function(b,c){if(c){b=this.getAbsoluteRowIndex(b);if(this.gridOptions.paginationOptions.isLocalPagination){var d=[];this.gridData&&this.gridData.rows&&(d=this.gridData.rows);var e=d.length;return b>=e?(alert("Error: getRowData\u65b9\u6cd5\uff0c\u5f53\u524d\u603b\u8ba1 "+e+" \u6761\u6570\u636e , rowIndex("+b+") \u8d8a\u754c\uff01"),null):d[b]}alert("Error: \u5206\u672c\u5730\u5206\u9875\u6a21\u5f0f\uff0c\u65e0\u6cd5\u83b7\u53d6\u5176\u4ed6\u9875\u6570\u636e\uff01");
return null}d=this.gridCurrentLoadedRows;e=d.length;return b>=e?(alert("Error: getRowData\u65b9\u6cd5\uff0c\u5f53\u524d\u603b\u8ba1 "+e+" \u6761\u6570\u636e , rowIndex("+b+") \u8d8a\u754c\uff01"),null):d[b]},getGridData:function(){return this.gridData},getAllRows:function(){return!1===this.gridOptions.paginationOptions.isLocalPagination?(alert("Error: getAllRows\u65b9\u6cd5\u4ec5\u5bf9\u672c\u5730\u5206\u9875\u65b9\u5f0f\u6709\u6548\uff01"),[]):this.gridData.rows},getCurrentLoadedRows:function(){return this.gridCurrentLoadedRows},
_displayColumns:function(b,c){for(var c=!!c,d=0,e=b.length;d<e;d++){var f=this.getColumnDom(b[d],null,!0,!1);$.each(f,function(){c?this.removeClass("grid-hidden-cell"):this.removeClass("grid-hidden-cell").addClass("grid-hidden-cell")});if(f=this.getColumn(b[d]))f.hidden=!c}this.adjustGridStyle()},appendRow:function(b,c){var d=this.gridCurrentLoadedRows.length;this.insertRows([d],[b],[!!c])},appendRows:function(b,c){if(!(b instanceof Array))return alert("Error: appendRows \u53c2\u6570 \u5fc5\u987b\u4e3a\u6570\u7ec4\uff01"),
!1;var d=b.length,e=-1;if(void 0!=c){if(!(c instanceof Array))return alert("Error: appendRows \u53c2\u6570 \u5fc5\u987b\u4e3a\u6570\u7ec4\uff01"),!1;e=c.length;if(d!=e)return alert("Error: appendRows \u6570\u7ec4\u53c2\u6570\u957f\u5ea6\u5fc5\u987b\u4e00\u81f4\uff01"),!1}else c=[];for(var f=[],g=this.gridCurrentLoadedRows.length,h=0;h<d;h++)f.push(g+h),-1==e&&c.push(!1);this.insertRows(f,b,c)},insertRow:function(b,c,d){this.insertRows([b],[c],[!!d])},insertRows:function(b,c,d){if(!(b instanceof Array)||
!(b instanceof Array))return alert("Error: insertRows \u65b9\u6cd5\u53c2\u6570\u5fc5\u987b\u4e3a\u6570\u7ec4!"),!1;var e=b.length,f=c.length,g=-1;if(void 0!=d){if(!(b instanceof Array))return alert("Error: insertRows \u65b9\u6cd5 \u53c2\u6570\u5fc5\u987b\u5168\u4e3a\u6570\u7ec4\uff01"),!1;g=d.length;if(e!=f||f!=g)return alert("Error: insertRows \u65b9\u6cd5 \u6570\u636e\u53c2\u6570\u5fc5\u987b\u957f\u5ea6\u4e00\u81f4\uff01"),!1}else if(e!=f)return alert("Error: insertRows \u65b9\u6cd5 \u6570\u636e\u53c2\u6570\u5fc5\u987b\u957f\u5ea6\u4e00\u81f4\uff01"),
!1;for(var f=!1,h=this.conf.columns[0],l=this.gridDom.bodyRight,m=this.gridOptions.checkOptions,n=m.checkedRowIndexMap,q=this.gridCurrentLoadedRows,p=0;p<e;p++){-1!=g&&(f=d[p]);var r=this.rowRender(b[p],c[p],h,!!f),u=this.getRowDom(b[p]);0==u.length?0==q.length?l.html(r):l.append(r):($(r).insertBefore(u),this.adjustCheckedRowIndexMaps(b[p],!0),this.refreshRowIndex());this.adjustRows(!0,b[p],c[p]);f&&(n.add(b[p]+"",c[p]),m.lastCheckedRowDom=this.getRowDom(b[p]))}this._updateCheckAllStatus();this.adjustGridStyle();
m.isAddOrRemoveData=!0},refreshRowIndex:function(){this.getRowDom().each(function(b){$(this).attr("rowindex",b);$(this).removeClass("grid-row-odd");0==b%2&&$(this).addClass("grid-row-odd")})},deleteRow:function(b){return void 0==b?(alert("Error: deleteRows \u65b9\u6cd5\u53c2\u6570\u4e0d\u80fd\u4e3a\u7a7a\uff01"),!1):this.deleteRows([b])},deleteRows:function(b){if(!b)return alert("Error: deleteRows \u65b9\u6cd5\u53c2\u6570\u4e0d\u80fd\u4e3a\u7a7a\uff01"),!1;var c=!1;b.sort();for(var d=[],e=0,f=b.length;e<
f;e++){var g=b[e],h=this.getRowDom(g);h.length&&(c=!0,h.remove(),this.adjustCheckedRowIndexMaps(g,!1),d.push(g))}if(!1===c)return!1;e=0;for(f=d.length;e<f;e++)this.adjustRows(!1,d[e]-e);this.gridOptions.checkOptions.isAddOrRemoveData=!0;this.refreshRowIndex();this._updateCheckAllStatus();this.adjustGridStyle();return!0},_onClickRow:function(b){if(this.conf.onClickRow)this.conf.onClickRow(b)},_onDblClickRow:function(b){if(this.conf.onDblClickRow)this.conf.onDblClickRow(b)},_onBeforeCheckRow:function(b){if(this.conf.onBeforeCheckRow)this.conf.onBeforeCheckRow(b);
return!0},_rowStyler:function(b,c){var d="";this.conf.rowStyler&&(d=this.conf.rowStyler(b,c));return d||""},getBrowserVersion:function(){var b="",c="";/Firefox[\/\s](\d+\.\d+)/.test(navigator.userAgent)&&(b="firefox",c=new Number(RegExp.$1),c=Math.floor(c));/MSIE (\d+\.\d+);/.test(navigator.userAgent)&&(b="ie",c=new Number(RegExp.$1),c=Math.floor(c));/Opera[\/\s](\d+\.\d+)/.test(navigator.userAgent)&&(b="opera",c=new Number(RegExp.$1),c=Math.floor(c));-1<navigator.userAgent.toLowerCase().indexOf("chrome")&&
-1!=navigator.userAgent.toLowerCase().indexOf("safari")&&(b="chrome",c="");-1==navigator.userAgent.toLowerCase().indexOf("chrome")&&-1!=navigator.userAgent.toLowerCase().indexOf("safari")&&(b="safari",c="");return{browserName:b,browserVersion:c}},getSrollBarWidth:function(){return 17},getAbsoluteRowIndex:function(b,c){if(!1===c)return b;var b=parseInt(b,10),d=this.gridOptions.paginationOptions;return(d.currentPageNumber-1)*d.pageSize+b},addCheckedRowIndex:function(b,c){var b=""+b,d=this.gridOptions.checkOptions;
d.checkedRowIndexMap.add(b,this.getRowData(b));if(!1!==c){var e=this.getAbsoluteRowIndex(b);d.allPageCheckedRowIndexMap.add(e+"",this.getRowData(b))}},removeCheckedRowIndex:function(b,c){var b=""+b,d=this.gridOptions.checkOptions;d.checkedRowIndexMap.removeKey(b);if(!1!==c){var e=this.getAbsoluteRowIndex(b);d.allPageCheckedRowIndexMap.removeKey(e+"")}},clearCheckedRowIndex:function(b){var c=this.gridOptions.checkOptions;c.checkedRowIndexMap.clear();c.lastCheckedRowDom=null;c.isAddOrRemoveData=!1;
!1!==b&&c.allPageCheckedRowIndexMap.clear()},getAllPageCheckedRowIndexs:function(){var b=this.gridOptions.checkOptions;return b.isAddOrRemoveData?(alert("Error: \u5f53\u524d\u8868\u683c\u5df2\u53d8\u66f4\u6570\u636e\uff0cgetAllPageCheckedRowIndexs \u65b9\u6cd5\u65e0\u6548\uff01"),[]):b.allPageCheckedRowIndexMap.keys},getAllPageCheckedRows:function(){var b=this.gridOptions.checkOptions;return b.isAddOrRemoveData?(alert("Error: \u5f53\u524d\u8868\u683c\u5df2\u53d8\u66f4\u6570\u636e\uff0cgetAllPageCheckedRows \u65b9\u6cd5\u65e0\u6548\uff01"),
[]):b.allPageCheckedRowIndexMap.items},getCurrentPageCheckedRowIndexs:function(){return this.gridOptions.checkOptions.checkedRowIndexMap.keys},getCurrentPageCheckedRows:function(){return this.gridOptions.checkOptions.checkedRowIndexMap.items},adjustCheckedRowIndexMaps:function(b,c){var d=this.gridOptions.checkOptions.checkedRowIndexMap,e=d.items,f=d.keys;this.clearCheckedRowIndex();for(var g=-1,h=0,l=f.length;h<l;h++)g=parseInt(f[h],10),g>=b&&(g+=c?1:-1),d.add(g+"",e[h])},adjustRows:function(b,c,
d){var e=this.gridCurrentLoadedRows,f=this.gridData.rows,g=this.getAbsoluteRowIndex(c,!!this.gridOptions.paginationOptions.isLocalPagination);b?(f.splice(g,0,d),e.splice(c,0,d),this.gridData.total+=1):(f.splice(g,1),e.splice(c,1),this.gridData.total-=1)},isCheckOrRadio:function(b){return"checkbox"==b.field||"radio"==b.field?(b.field=this.conf.singleSelect?"radio":"checkbox",b.isCheckbox="checkbox"==b.field,b.isCheckOrRadio=!0,b.field):!1},getPaginationOptions:function(){return this.gridOptions.paginationOptions},
getColumnMaxWidth:function(b){function c(){var b=$(this).width();e<b&&(e=b)}if(!0===b.hidden)return 0;if(this.isCheckOrRadio(b))return this.gridOptions.gridConstant.ckColumnWidth;if(b.width&&"auto"!==b.width)return b.width;var d=this.getColumnDom(b.field,null,!0),e=b.title.length*this.gridOptions.gridConstant.GRID_COLUMN_WIDTH_SIZE;d.length?$.each(d,c):alert("Error: \u672a\u67e5\u627e\u5230\u6307\u5b9a\u5217("+b.field+") dom");return e},getColumnDom:function(b,c,d,e){var b="grid-cell-field-"+b,f=
this.gridDom,g=[];d&&g.push($("div."+b,f.headerRight));e||$("div."+b,f.bodyRight).each(function(){g.push($(this))});return void 0!=c?(c=parseInt(c,10),d&&(c+=1),[g[c]]):g},getColumn:function(b){if(!b)return alert("Error: getColumn \u53c2\u6570 field \u53c2\u6570\u4e0d\u80fd\u4e3a\u7a7a"),null;for(var c=this.conf.columns[0],d=0,e=c.length;d<e;d++){var f=c[d];if(f.field===b)return f}return!1},getRowDom:function(b){var c=this.gridDom;return void 0!=b?$("div.grid-row[rowindex="+b+"]",c.bodyRight):$("div.grid-row",
c.bodyRight)},validateParam:function(b){if(!document.getElementById(b.dom))return alert("Error: dom \u5c5e\u6027\u4e0d\u80fd\u4e3a\u7a7a\u4e14\u6307\u5b9adom\u8282\u70b9\u5fc5\u987b\u5b58\u5728\uff01"),!1;if(!b.columns||1!==b.columns.length||!(b.columns[0]instanceof Array))return alert("Error: columns \u53c2\u6570\u5fc5\u987b\u4e3a\u4e8c\u7ef4\u6570\u7ec4!"),!1;for(var c={},d="",e=0,f=b.columns[0].length;e<f;e++){d=b.columns[0][e].field;if(!d)return alert("Error: \u7b2c "+(e+1)+" \u5217\u7684field\u5c5e\u6027\u4e0d\u80fd\u4e3a\u7a7a\u6216\u8005\u7a7a\u5b57\u7b26\u4e32\u6216\u80050\uff01"),
!1;if("checkbox"==d&&!1!==b.singleSelect)return alert("Error: \u5355\u9009\u72b6\u6001\u4e0b\uff0c\u4e0d\u80fd\u5b58\u5728field\u4e3acheckbox\u7684\u5217\uff0c\u8bf7\u4f7f\u7528radio\uff01"),!1;if("radio"==d&&!1===b.singleSelect)return alert("Error: \u591a\u9009\u72b6\u6001\u4e0b\uff0c\u4e0d\u80fd\u5b58\u5728field\u4e3aradio\u7684\u5217\uff0c\u8bf7\u4f7f\u7528checkbox\uff01"),!1;if(c[d])return alert("Error: \u5217\u7684field\u5c5e\u6027\u4e0d\u80fd\u91cd\u590d\uff01\u91cd\u590d\u5b57\u6bb5\u540d:["+
d+"]\uff01"),!1;c[d]=1}return!0},destroy:function(){this.com.remove()},getClassName:function(){return"PJF.ui.grid"}});
PJF.apply(PJF.ui.grid.prototype,{loadData:function(b){this.clearData(!1);this.gridData=b;this._loadData();this.adjustGridStyle()},clearData:function(b){this.resetGridStatus();this.resetPagination();!1!==b&&this.adjustGridStyle(!0)},sendReq:function(){this.conf.url?(this.resetPagination(),this._loadData()):alert("Error: \u65e0\u8bf7\u6c42\u5730\u5740 , url\u3000\u5c5e\u6027\u4e3a\u7a7a\uff01")},refresh:function(){this._loadData()},bindEventAction:function(){},hideColumn:function(b){return!b?(alert("Error: field \u53c2\u6570\u4e0d\u80fd\u4e3a\u7a7a\uff01"),
!1):this.hideColumns([b])},showColumn:function(b){return!b?(alert("Error: field \u53c2\u6570\u4e0d\u80fd\u4e3a\u7a7a\uff01"),!1):this.showColumns([b])},hideColumns:function(b){if(!(b instanceof Array))return alert("Error: hideColumns \u53c2\u6570\u5fc5\u987b\u662f\u6570\u7ec4"),!1;this._displayColumns(b,!1);return!0},showColumns:function(b){if(!(b instanceof Array))return alert("Error: hideColumns \u53c2\u6570\u5fc5\u987b\u662f\u6570\u7ec4"),!1;this._displayColumns(b,!0);return!0}});PJF.ui.dateSpinner=PJF.extend(PJF.ui.component,{init:function(b){var c=this;c.conf=$.extend({date:new Date,dateform:"yyyy-mm-dd"},b);c.com.append("<input id='pjf_dateSpinner_input' class='pjf_dateSpinner_input' readonly='true' />");c.com.append("<div class='pjf_dateSpinner_cntr'><div class='pjf_dateSpinner_ctrlarea'><div class='pjf_dateSpinner_negative'><ul id='pjf_dateSpinner_year' class='pjf_dateSpinner_year'></ul><ul id='pjf_dateSpinner_month' class='pjf_dateSpinner_month'></ul><ul id='pjf_dateSpinner_date' class='pjf_dateSpinner_date'></ul></div><div id='pjf_dateSpinner_overlayer' class='pjf_dateSpinner_overlayer'></div><div class='pjf_dateSpinner_btnarea'><div class='pjf_dateSpinner_btn'></div></div></div></div>");
var d=c.conf.date;c.weekday="\u5468\u65e5 \u5468\u4e00 \u5468\u4e8c \u5468\u4e09 \u5468\u56db \u5468\u4e94 \u5468\u516d".split(" ");c.monthday=[31,28,31,30,31,30,31,31,30,31,30,31];c.yearul=c.com.find("#pjf_dateSpinner_year");c.monthul=c.com.find("#pjf_dateSpinner_month");c.dateul=c.com.find("#pjf_dateSpinner_date");c.getDateFromConf(d);c.dateInput=c.com.find("#pjf_dateSpinner_input");c.dateSpinner=c.com.find(".pjf_dateSpinner_cntr");c.setAttr(b.inputAttr);c.isLeapyear();c.showDate();for(i=0;200>
i;i++)c.yearul.append("<li>"+(1900+i)+"</li>"),12>i&&c.monthul.append("<li>"+(i+1)+"</li>"),i<c.monthday[c.month-1]&&c.dateul.append("<li>"+(i+1)+"</li>");c.yearul.css("top",50*(1902-c.year));c.monthul.css("top",50*(3-c.month));c.dateul.css("top",50*(3-c.date));c.centerDate();!1===b.showplate&&c.dateSpinner.hide();c.com.bind("mousemove",function(b){b.preventDefault();return!1});var e,f,g,h;c.com.find("#pjf_dateSpinner_overlayer").bind("mousedown",function(b){function d(b){function l(){0!=s%50&&(m=
0<s%50&&25>s%50?s-s%50:0>s%50&&50>Math.abs(s%50)&&25<Math.abs(s%50)?s+(Math.abs(s%50)-50):0>s%50&&25>=Math.abs(s%50)?s+Math.abs(s%50):s+50-s%50,c.movingObj.css({top:m}));var b=c.centerDate();c.year=b[0];c.month=b[1];c.date=b[2];c.day=(new Date(c.year,c.month-1,c.date)).getDay();c.showDate();c.isLeapyear();for(i=0;i<c.monthday[c.month-1];i++)if(b=c.dateul.find("li"),b[i]||c.dateul.append("<li>"+(i+1)+"</li>"),b.length>c.monthday[c.month-1])for(j=c.monthday[c.month-1];j<b.length;j++)$(b[j]).remove(),
c.centerDate()[2]||c.dateul.css("top",parseInt(c.dateul.css("top"))+50)}b.unbind("mousemove");b.unbind("mouseout");b.unbind("mouseup");f=new Date;h=b=parseInt(c.movingObj.css("top"));var m,n=(h-g)/(f-e),p=3*n*n/0.012,q=n/6,s=b;0.4<Math.abs(n)?(0<q?s=b+p:(q=-q,s=b-p),s-150<0-c.movingObj.height()?s=150-c.movingObj.height():100<s&&(s=100),c.com.find(".pjf_dateSpinner_ctrlarea").append('<div class="pjf_dateSpinner_overlayer2"></div>'),c.movingObj.css("transition","top "+q+"s ease"),c.movingObj.css("top",
s),c.movingObj.bind("transitionend",function(){c.movingObj.unbind("transitionend");c.movingObj.css("transition","all 0.3s ease");l();c.com.find(".pjf_dateSpinner_overlayer2").remove();c.movingObj.css("transition","top 0 ease")})):l()}b.preventDefault();c.movingObj=null;var n,q=b.pageX-$(this).offset().left,p=b.pageY-$(this).offset().top;e=new Date;if(0<q&&150>=q)c.movingObj=c.yearul;else if(150<q&&300>=q)c.movingObj=c.monthul;else if(300<q&&450>=q)c.movingObj=c.dateul;else return;n=parseInt(c.movingObj.css("top"));
c.movingObj.find(".pjf_dateSpinner_center").removeClass("pjf_dateSpinner_center");g=n;$(this).bind("mousemove",function(b){b.preventDefault();b.offsetY=b.pageY-$(this).offset().top;b=n+b.offsetY-p;if(b-150<0-c.movingObj.height()||100<b)return!1;c.movingObj.css("top",b);return!1}).bind("mouseup",function(){d($(this))}).bind("mouseout",function(){d($(this))})});c.com.find(".pjf_dateSpinner_btn").bind("click",function(){c.centerDate();c.getValue("_");c.dateSpinner.hide();"function"==typeof b.fn&&b.fn(c)});
c.dateInput.bind("click",function(){c.dateSpinner.show();return!1})}});
PJF.apply(PJF.ui.dateSpinner.prototype,{setValue:function(b){this.getDateFromConf(b);this.isLeapyear();this.showDate();this.yearul.css("top",50*(1902-this.year));this.monthul.css("top",50*(3-this.month));this.dateul.css("top",50*(3-this.date));this.centerDate()},getValue:function(b){return"object"==b?new Date(this.year,this.month-1,this.date):"_"==b?this.showDate():this.joinStr(this.year,this.month,this.date)},setAttr:function(b,c){if("object"==typeof b)for(a in b)this.dateInput.attr(a,b[a]);else"string"==
typeof b&&this.dateInput.attr(b,c)},setDateform:function(b){"string"!=typeof b?(this.conf.dateform=b,this.params.dateform=b):this.showDate()},getDateFromConf:function(b){if(0==b.length)this.year=1980,this.date=this.month="01",this.day=(new Date(this.year,this.month,this.date)).getDay();else if("object"==typeof b)this.year=b.getFullYear(),this.month=this.fillzero(b.getMonth()+1),this.date=this.fillzero(b.getDate()),this.day=b.getDay();else if("string"==typeof b||"number"==typeof b)b+="",this.year=
parseInt(b.substring(0,4)),this.month=this.fillzero(b.substring(4,6)),this.date=this.fillzero(b.substring(6)),this.day=(new Date(this.year,this.month,this.date)).getDay()},centerDate:function(){var b=this,c=[];b.com.find("ul").each(function(){var d=$(this),e=d.find("li").removeClass("pjf_dateSpinner_center"),d=parseInt(d.css("top")),f=parseInt((100-d)/50);25<(100-d)%50&&(f+=1);e=$(e[f]);e.addClass("pjf_dateSpinner_center");c.push(b.fillzero(e.html()))});b.year=c[0];b.month=c[1];b.date=c[2];b.day=
(new Date(b.year,b.month-1,b.date)).getDay();return c},isLeapyear:function(){if(0==this.year%400||0==this.year%4)return this.monthday[1]=29,!0;this.monthday[1]=28;return!1},showDate:function(){fulldate=this.conf.dateform.replace("yyyy",this.year).replace("mm",this.month).replace("dd",this.date);this.dateInput.val(fulldate);return fulldate},joinStr:function(){var b=[];for(i=0;i<arguments.length;i++)b.push(arguments[i]);return b.join("")},fillzero:function(b){b=parseInt(b);10>b&&(b="0"+b);return b}});
